<!doctype html>
<html prefix="og: http://ogp.me/ns#" lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#1FD316">
  <link rel="alternate" type="application/rss" title="Latest articles" href="/en/feed"/>
  <title>
    Le netcode des jeux de combat  </title>
  <meta name="description" content="
    Les USA l'adorent, le Japon semble le détester. Mais c'est quoi ce netcode « rollback » dont tout le monde parle ?">
  <meta property="og:title" content="Le netcode des jeux de combat">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Les USA l&#039;adorent, le Japon semble le d&eacute;tester. Mais c&#039;est quoi ce netcode &laquo; rollback &raquo; dont tout le monde parle ?">
    <meta property="og:site_name" content="Bas Gros Poing">
    <meta property="og:url" content="/en/articles/le-netcode-des-jeux-de-combat">
    <meta property="og:image" content="/media/pages/articles/le-netcode-des-jeux-de-combat/b7c7b3f2ad-1701364373/seo.png">
    <meta property="og:image:height" content="445">
    <meta property="og:image:width" content="790">
    <meta property="og:image:type" content="image/png">
    <meta property="og:article:author" content="Infil">
    <meta property="og:article:published_time" content="2020-02-23">
    <meta property="og:article:tag" content="netcode, jeu en ligne, rollback">
    <meta property="og:article:url" content="/en/articles/le-netcode-des-jeux-de-combat">
    <meta property="og:article:description" content="Les USA l&#039;adorent, le Japon semble le d&eacute;tester. Mais c&#039;est quoi ce netcode &laquo; rollback &raquo; dont tout le monde parle ?">
    <meta property="og:article:site_name" content="Bas Gros Poing">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@basgrospoing">
    <meta name="twitter:creator" content="infilament">
    <meta name="twitter:title" content="Le netcode des jeux de combat">
    <meta name="twitter:description" content="Les USA l&#039;adorent, le Japon semble le d&eacute;tester. Mais c&#039;est quoi ce netcode &laquo; rollback &raquo; dont tout le monde parle ?">
    <meta name="twitter:image" content="/media/pages/articles/le-netcode-des-jeux-de-combat/b7c7b3f2ad-1701364373/seo.png">
    <link rel="icon" href="/assets/images/icons/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="icon" href="/assets/images/icons/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="/assets/images/icons/favicon-96x96.png" sizes="96x96" type="image/png">
    <link rel="icon" href="/assets/images/icons/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="icon" href="/assets/images/icons/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="/assets/images/icons/favicon-96x96.png" sizes="96x96" type="image/png">
    <link rel="canonical" href="https://ki.infil.net/w02-netcode.html">

<!-- COUPURE -->
  <link rel="manifest" href="/assets/pwa/manifest.json">
  <link rel="preload" href="/assets/css/base.css?v=1.0.12" as="style">
  <link rel="preload" href="/assets/css/main.css?v=1.0.12" as="style">
  <link rel="stylesheet" href="/assets/css/base.css?v=1.0.12">
  <link rel="stylesheet" href="/assets/css/main.css?v=1.0.12">
  <link rel=“preload” href="/assets/fonts/FuturaStd-ExtraBoldOblique.woff2" as=“font” type="font/woff2" crossorigin="anonymous">
  <link rel=“preload” href="/assets/fonts/FuturaStd-ExtraBold.woff2" as=“font” type="font/woff2" crossorigin="anonymous">
  <link rel=“preload” href="/assets/fonts/BauerBodoniStd-Italic.woff2" as=“font” type="font/woff2" crossorigin="anonymous">
  <link rel=“preload” href="/assets/fonts/FuturaStd-LightOblique.woff2" as=“font” crossorigin="anonymous">
  <link rel=“preload” href="/assets/fonts/FuturaStd-Light.woff2" as=“font” type="font/woff2" crossorigin="anonymous">

  <!-- Theme switcher -->
  <script>
    //Change theme
    function toggleDarkLight() {
      var hasTheme = document.documentElement.hasAttribute('theme') ? true : false;
      if (hasTheme == false) {
        document.documentElement.setAttribute('theme', 'dark');
        localStorage.setItem("theme", "dark");

      }
      if (hasTheme == true) {
        {
          document.documentElement.removeAttribute('theme');
          localStorage.setItem("theme", "light");

        }
      }
    }

    function setThemeFromCookie() {
      var hasTheme = document.documentElement.hasAttribute('theme') ? true : false;
      var value = localStorage.getItem("theme");
      if (hasTheme == true && value == "light") {
        document.documentElement.setAttribute('theme', 'light');
        localStorage.setItem("theme", "light");
      }
      if (hasTheme == false && value == "dark") {
        document.documentElement.setAttribute('theme', 'dark');
        localStorage.setItem("theme", "dark");
      }

    }
    (function () {
      setThemeFromCookie()
    })();
  </script>
</head>

<body>
  <header>
    
<nav class="main-menu" id="">
  <div class="main-menu__container">
    <ul>
                                 
                      <li class="menu__item" id='active'>
          <a href="/en/articles">
            <span>
              Articles</span>
            <i class="articles"></i>
          </a>
        </li>
        <li class="menu__logo" id="logo">
          <a href="/en/">
            <img src="/assets/images/logo-pink.svg" alt="logo">
          </a>
        </li>


             
                   
            <li class="menu__item" >
        <a href="https://basgrospoing.fr/en/articles/about-us" target="_blank" rel="noopener">
          <span>
            About us          </span>
          <i class="help"></i>
        </a>
      </li>
      

    </ul>

  </div>
  <div id="Reading-progress">
    <h5>
      Le netcode des jeux de combat    </h5>
    <span id="Progress-bar" class="bar">

    </span>
  </div>

</nav>


  </header>

            <article id="magazine">
            <div class="magazine__head white-bg">
                                    <img loading="lazy" aria-hidden="true" srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/930a24c512-1701364373/hisako-crop-crop-549x976-crop.jpg 550w, /media/pages/articles/le-netcode-des-jeux-de-combat/930a24c512-1701364373/hisako-crop-crop-1000x1000-crop.jpg 999w, /media/pages/articles/le-netcode-des-jeux-de-combat/930a24c512-1701364373/hisako-crop-crop-1920x1080-crop.jpg 1920w" />
                            </div>

            <div class="magazine__titles">
                <h1 class="underline-m--pink">Le netcode des jeux de combat</h1>
            </div>

            <div class="magazine__content">

                <div class="magazine__date">
                    <p>
                        <small>
                            Published on the 
                            23/02/2020</small>
                    </p>
                </div>
                <em>Ces derniers mois la qualité du jeu en ligne est devenu un débat central dans le milieu du jeu de combat. Alors que la majorité des jeux venant des États-Unis semblent avoir adopté un code réseau « rollback », les studios Japonais semblent réticents à l'idée de s'y mettre, s'attirant les foudres du public occidental. Avec sa permission et afin de permettre à chacun d'avoir les clés du débat, nous publions en français l'article d'Infil sur les différences entre netcode « rollback » et le netcode à base de délai.</em>
                <p class="article__fight">
                    <svg xmlns="http://www.w3.org/2000/svg" id="Calque_1" viewBox="0 0 89.5 59.9">
                        <style>
                            .st0 {
                                fill: #dadada
                            }

                            .st1 {
                                fill: #706f6f
                            }
                        </style>
                        <path id="XMLID_61_" class="st0" d="M29.7 59.9L44 44l17.2 12.5-8.4-17.2 14.8 1.9-10.4-8.7 14.2-6.9-15.7-2 14-10.8-16.2 3.9L56.4 0 43 15l-3.4-9.6-2.2 10.7L18.8 3.6l11.5 16.5-16-1.1 13.3 9-20 4.1 23.6 3.6-17.1 15.6 22-11.3z" />
                        <g id="XMLID_3_">
                            <g id="XMLID_146_">
                                <path id="XMLID_158_" class="st1" d="M3.2 26.3l11.5-1.4-.8 5-5.2.6-.3 1.8 4.6-.5-.7 4.6-4.6.5-1 6.1-6.3.7 2.8-17.4z" />
                                <path id="XMLID_156_" class="st1" d="M15.9 24.7l6.2-.8-2.7 17.6-6.2.7 2.7-17.5z" />
                                <path id="XMLID_154_" class="st1" d="M40.9 28.8c-.5 2.9-.8 5.3-3.2 7.8-2.1 2.3-5.1 3.7-7.8 4-5.2.6-8.9-2.2-8.1-7.9.9-5.8 5.5-9.7 10.9-10.4 3-.4 6.9.7 7.7 3.5l-6.2 2.9c-.3-.8-1.2-1.2-2.2-1.1-2.2.3-3.8 2.4-4.1 4.5-.3 1.9.6 3.6 2.6 3.4 1-.1 2.3-.7 2.8-1.8l-2.8.3.6-4.2 9.8-1z" />
                                <path id="XMLID_152_" class="st1" d="M43 21.4l6-.7-.9 6 3.8-.5.9-6 6-.7-2.7 17.9-6 .7.9-6.2-3.8.4-.9 6.2-6 .7L43 21.4z" />
                                <path id="XMLID_150_" class="st1" d="M59.3 19.4l13.1-1.6-.9 5.9-3.4.2-1.9 12.3-6.2.7 1.9-12.3-3.5.6.9-5.8z" />
                                <path id="XMLID_147_" class="st1" d="M86.1 31.3c-.3 1.9-2.2 3.2-3.8 3.4-1.7.2-3.2-.7-2.9-2.6.3-1.9 2.2-3.2 3.8-3.4 1.7-.2 3.2.7 2.9 2.6zm-5.7-3.5l1.8-12.4 6-.7-1.8 12.4-6 .7z" />
                            </g>
                        </g>
                    </svg>
                </p>

                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Bon retour sur Fightin' Words ! Cela fait un moment depuis que nous avons discuté de comment les <a href="http://ki.infil.net/w01-bugs.html" rel="noopener noreferrer nofollow">plus célèbres bugs de jeux de combat</a> ont affecté quelques-uns de nos jeux favoris. Le sujet d'aujourd'hui est un peu plus technique, mais c’est un facteur tout aussi important dans la façon dont on joue à nos jeux modernes favoris : <strong>nous allons nous plonger dans les tréfonds du netcode</strong>, ou jeu en réseau.</p><p>Fondamentalement, le netcode est simplement une technologie qui permet à plusieurs ordinateurs, chacun en train d'essayer de jouer au même jeu, de communiquer entre eux via internet. Alors que le jeu en local garantit toujours l'arrivée et le traitement des actions des joueurs en simultané, <strong>les réseaux sont instables</strong> de bien des manières, que l'on ne peut ni contrôler ni prédire. Les informations envoyées à l'adversaire peuvent arriver en retard, dans le désordre, ou bien être complètement perdues. Cela peut-être dû à de nombreux facteurs : la distance par rapport à votre adversaire, si vous êtes connectés en WiFi, ou si votre colocataire regarde Netflix.</p><p>Le jeu en ligne dans les jeux vidéo n'a rien de nouveau, mais les jeux de combat apportent leur propre lot de défis à résoudre. Contrairement à beaucoup d'autres types de jeux populaires, ils ont tendance à impliquer des connexions directes entre les joueurs. Une<strong> latence basse et constante</strong> est extrêmement importante car la mémoire musculaire et les réactions sont capitales dans tous les jeux de combat. Par conséquent, deux stratégies principales ont émergé pour s’affronter en ligne : le <strong>netcode « delay »</strong> et le <strong>netcode « rollback »</strong>.</p><p>Récemment beaucoup de voix se sont élevées <strong>en faveur du rollback</strong>. Pareillement, on entend que les développeurs de jeux de combat qui choisissent le netcode à base de délai empêcheraient le genre d'évoluer. Bien que ce sujet soit important aux yeux de la communauté du jeu de combat depuis de nombreuses années, de nouveaux titres – pourtant excellents de manière générale – proposent régulièrement de mauvaises expériences de jeu en ligne, causant bien des frustrations.</p><p>Peu d’explications sont nécessaires pour comprendre ce qu'est le netcode rollback, comment il fonctionne, et pourquoi il est si efficace pour cacher la misère induite par de mauvaises connexions (<a href="http://mauve.mizuumi.net/2012/07/05/understanding-fighting-game-networking.html" rel="noopener noreferrer nofollow">bien qu'il ne s'agisse pas d'une solution miracle</a>). Ce sujet est extrêmement important pour le futur et notamment pour la santé de la communauté du jeu de combat. Aussi, je souhaite démystifier certaines idées reçues concernant ces technologies et expliquer en détail leur fonctionnement, afin que chacun puisse en discuter de manière informée.</p><p>Avant d'entrer dans les détails, cependant, j'aimerais clarifier une chose.</p></div>
</div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Pourquoi devrais-je me sentir concerné ?    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Tous les studios et joueurs devraient se saisir du sujet. <strong>Jouer en ligne n'est plus un hypothétique futur, il s'agit désormais du présent</strong>.</p><p>Bien que la plupart des autres genres de jeux vidéo l'aient compris depuis une dizaine d'années ou plus, les développeurs de jeux de combat rechignent à accepter l’idée du jeu en ligne. Peut-être est-ce dû aux origines du genre, qui prennent racine dans des environnements hors ligne tels que les salles d'arcade et les tournois. C'est fantastique de pouvoir jouer hors ligne, et cela sera toujours quelque chose d'important. Cependant, la dure réalité, c'est qu'<strong>un gros pourcentage des joueurs ne jouera jamais hors ligne</strong>. Pour beaucoup de férus de jeux de baston, jouer en ligne, c'est le jeu. Une mauvaise expérience en ligne les empêche de s'améliorer, de jouer ou de recommander le jeu à leurs amis, et finit par provoquer <a href="https://www.youtube.com/watch?v=iTUtnclr2hs&amp;feature=youtu.be&amp;t=758" rel="noopener noreferrer nofollow">une perte d'intérêt</a>.</p><p>Même avec une bonne connexion, ou même si l’on vit dans une région du monde possédant une infrastructure internet robuste, un bon netcode reste indispensable. En effet, perdre des informations ou bien les recevoir en retard lors d’un transfert de données est courant. Même sur les meilleurs réseaux un mauvais netcode peut très facilement empêcher le bon déroulement d'un match. À l’inverse, un bon netcode a l'avantage de mettre en lien des joueurs sur de plus grandes distances, ce qui permet de rapprocher des communautés disparates.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/43b05615cc-1701364373/faithfulimmaculatebug.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Un mauvais netcode peut ruiner certains matches. Ce match, joué en ligne entre deux joueurs japonais, a faussé les sélections pour les finales du Capcom Pro Tour. (<a href="https://twitter.com/john_takeuchi/status/1162562266027327488" rel="noopener noreferrer nofollow">source</a>)				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Qu'en est-il de ceux qui ne jouent jamais en ligne parce qu'ils préfèrent jouer hors ligne avec leurs amis ? Un bon netcode crée un <strong>cercle vertueux</strong>. Il y aura plus de joueurs actifs, donc plus de chances de profiter de votre jeu du coeur. Plus de vidéos, d'avantage de tournois en ligne à regarder en streaming, plus de guides et tutoriels pour les personnages peu populaires. En bref : plus d'effervescence autour du jeu. Par exemple, il ne fait aucun doute que l’excellent netcode de Killer Instinct (basé sur le rollback) ait joué un rôle important dans la croissance de sa communauté.</p><p>Un bon netcode c'est important, point à la ligne. Donc parlons-en.</p></div>
</div>                                    <div class="magazine__full-img white-bg">

            <img loading="lazy"
            class="lazy"
            src="/media/pages/articles/le-netcode-des-jeux-de-combat/712a99e643-1701364373/fightofanimals-300x-blur1-q20.jpg"
            data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/712a99e643-1701364373/fightofanimals-600x.jpg 600w"
            data-srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/712a99e643-1701364373/fightofanimals-600x.jpg 600w, /media/pages/articles/le-netcode-des-jeux-de-combat/712a99e643-1701364373/fightofanimals-800x.jpg 800w, /media/pages/articles/le-netcode-des-jeux-de-combat/712a99e643-1701364373/fightofanimals-1600x.jpg 1600w" />
                <div class="magazine__full-img__citation">
            <div class="magazine__citation">Fight Of Animals utilise le netcode rollback !</div>
        </div>
    </div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      LES BASES    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Avant de s'intéresser aux spécificités des différents types de netcode, nous devons d'abord rappeler certaines règles qui gouvernent les jeux de combat ainsi que certains termes.</p><p>Dans les jeux de combat, le temps est mesuré avec une unité appelée <strong>frame</strong>. Pour faire simple, on va considérer que tous les jeux de combats tournent à <strong>60 frames/images par seconde</strong>, ce qui veut dire qu'une frame correspond environ à 16 millisecondes (ms).</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/209acf23f0-1701364373/distinctdiscreteanhinga.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Une frame est la plus petite unité de temps dans un jeu de combat, représentant environ 16 millisecondes. Jago et Fulgore vous montrent quelques attaques basiques frame par frame.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p><em>Note du traducteur : pour le reste de l’article, le terme input désigne les commandes entrées par le joueur via son contrôleur et récupérées par la console ou l’ordinateur.</em></p><p>Contrairement aux apparences, une frame n'est pas seulement la vitesse à laquelle le jeu affiche de nouvelles images sur votre écran. Chaque frame, le jeu exécute <strong>une boucle</strong>, qui, entre autres, demande les inputs aux contrôleurs des joueurs, vérifie s'il y a de nouvelles informations sur le réseau, fait fonctionner l'IA des joueurs « ordinateurs », anime les coups que chaque personnage est en train d'exécuter, et vérifie si quelqu'un se prend un coup. Ensuite, la boucle de jeu traduit les résultats de tous ces calculs à l'écran, puis recommence 16 millisecondes plus tard. Dans les jeux de combat, cette boucle se doit d'être <strong>propre et régulière</strong> pour tous les joueurs, peu importe la vitesse de leur système.</p><p>Quand vous jouez hors ligne à un jeu de combat avec un ami, vous connectez deux contrôleurs de jeu à un ordinateur ou une console. Si vous appuyez tous les deux sur un bouton durant la même fenêtre de 16 millisecondes, le jeu recevra et traitera les inputs pendant la même frame et appliquera la logique comme prévu. Vous verrez tous deux le même résultat, car il n'y a qu'un seul ordinateur pour réaliser les calculs.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/5014250500-1701364373/dishonestenragedbeetle.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Les inputs de chaque joueur sont affichés en bas. Lorsque l'on joue hors ligne, il n'y a aucun souci pour traiter les inputs des deux joueurs dès que les boutons sont enfoncés.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Cela change lorsque deux joueurs jouent via internet.</p><p>Premièrement, il faut envoyer les informations à travers le réseau. On appelle «<strong> ping </strong>» le temps que prennent les informations à faire un aller-retour entre vous et l’autre joueur. Avec une connexion dont le ping est de 90 millisecondes, les informations mettront, logiquement, 45 millisecondes pour atteindre votre adversaire, ce qui correspond à environ 3 frames. Cela veut dire que <strong>les jeux doivent désormais traiter habilement</strong> la partie « inputs » de leur boucle de jeu, puisqu’il faut pouvoir s’assurer que les deux joueurs aient les mêmes informations.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/97ac1c6fc7-1701364373/snoopyapprehensivebettong.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Quand vous jouez en ligne vos inputs sont toujours traités de manière immédiate, mais ceux du joueur distant ont besoin de temps pour vous arriver. Le jeu doit décider comment garder les deux jeux synchronisés.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Deuxièmement, deux ordinateurs différents sont en train d'essayer de faire tourner deux copies du jeu en même temps, mais doivent malgré tout produire des résultats identiques pour les deux joueurs. C’est pour cela qu’on dit des jeux de combat qu’ils sont <strong>déterministes </strong>– en lui donnant des inputs identiques, chaque machine produira des résultats identiques. C'est utile pour les fonctionnalités hors-réseau comme les replays, parce qu'on peut simplement sauvegarder les inputs de chaque joueur et reconstruire le match à l'identique. Mais surtout, cela veut dire qu’une machine n’a besoin d'envoyer que les inputs des joueurs à travers le réseau pour pouvoir jouer en ligne. On évite ainsi l'envoi d'informations compliquées concernant l'état du jeu et on économise beaucoup de bande passante.</p><p>Quand les jeux s'envoient des informations l'un à l'autre, et que les deux machines font fonctionner indépendamment leurs boucles de jeu de manière synchronisée, on dit qu'ils utilisent un système de réseau « <strong>lockstep </strong>» (en parallèle).</p><p>Les machines ne communiquent pas avec une autorité centrale qui surveillerait le jeu pour elles et leur dirait quoi faire, comme un <a href="http://drewblaisdell.com/writing/game-networking-techniques-explained-with-pong" rel="noopener noreferrer nofollow">serveur</a>. Au lieu de cela, elles se surveillent mutuellement, s’assurant régulièrement qu’elles ont bien le même état du jeu. Si les machines entrent en désaccord, elles sont <strong>désynchronisées </strong>et devront probablement abandonner le match.</p><p>La communication directe entre les jeux est souvent plus rapide qu'en passant par un intermédiaire. De plus, le système lockstep est particulièrement bon pour prévenir un grand nombre de tricheries. Par exemple, même si vous aviez modifié votre jeu afin que Ryu puisse lancer des boules de feu plus rapides, ma version du jeu ne serait pas en accord avec la vôtre et nous serions vite désynchronisés.</p><p>Maintenant que le décor est posé, nous pouvons enfin nous attaquer <strong>au cœur du problème</strong>. Puisque nous avons un jeu de combat déterministe, qui utilise un système de réseau lockstep, les seules choses dont nous avons besoin pour jouer en ligne sont les inputs des deux joueurs. Nous allons pouvoir parler des façons « ingénieuses » dont un jeu de combat gère des inputs, qui dans les faits, arriveront toujours en retard.</p></div>
</div>                                    <div class="magazine__full-img white-bg">

            <img loading="lazy"
            class="lazy"
            src="/media/pages/articles/le-netcode-des-jeux-de-combat/2cf3fd032f-1701364373/umineko-300x-blur1-q20.jpg"
            data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/2cf3fd032f-1701364373/umineko-600x.jpg 600w"
            data-srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/2cf3fd032f-1701364373/umineko-600x.jpg 600w, /media/pages/articles/le-netcode-des-jeux-de-combat/2cf3fd032f-1701364373/umineko-800x.jpg 800w, /media/pages/articles/le-netcode-des-jeux-de-combat/2cf3fd032f-1701364373/umineko-1600x.jpg 1600w" />
                <div class="magazine__full-img__citation">
            <div class="magazine__citation">Umineko : Golden Fantasia utilise le netcode rollback !</div>
        </div>
    </div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Le netcode à base de délai    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Pour résumer le problème, les jeux de combat doivent traiter les inputs provenant de deux joueurs en même temps. Lorsque l'on joue en ligne, vos propres inputs sont reçus immédiatement, mais les inputs de l'adversaire pour la même frame doivent parcourir le réseau et arrivent en retard. Le jeu a besoin d'une stratégie afin de gérer ces inputs tardifs tout en gardant une sensation de jeu aussi proche du hors-ligne que possible.</p><p>Malheureusement, que chaque joueur attende l’input distant de son adversaire avant de finir la boucle de jeu pour chaque frame n’est pas une solution. Cela <a href="https://medium.com/@meseta/netcode-concepts-part-3-lockstep-and-rollback-f70e9297271" rel="noopener noreferrer nofollow">ralentirait indéfiniment</a> la boucle de jeu et rendrait le jeu totalement injouable.</p><p>La première stratégie, <strong>à base de délai</strong> ou encore <strong>à délai d'inputs</strong>, est la plus simple et la plus commune pour les jeux utilisant le lockstep. Si les inputs d'un joueur distant arrivent en retard car envoyés via le réseau, les technologies basées sur le délai <strong>décalent artificiellement les inputs du joueur local</strong> pour compenser le retard. En théorie, les deux inputs arrivent alors en même temps. Ils peuvent être exécutés comme prévu, de manière synchronisée.</p><p>Illustrons ceci plus clairement avec un exemple vidéo. Ici, deux joueurs sont en train de jouer à Under Night In-Birth, un jeu qui utilise un netcode à base de délai. Nous avons 90 millisecondes de ping. Cela veut dire qu'il faut – en moyenne – la moitié de ce temps (45 millisecondes soit à peu près <strong>3 frames</strong>), pour récupérer les inputs de l’adversaire. Le joueur local appuie sur un bouton à la 3ème frame. Hors-ligne, nous verrions l'animation de ce coup commencer immédiatement, mais au lieu de cela, le jeu <strong>retarde l'input de 3 frames</strong> et commence à exécuter le coup à la 6ème frame.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/6c87868543-1701364373/activeformalatlanticsharpnosepuffer.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Avec un netcode à base de délai, quand le joueur local appuie sur un bouton, il est artificiellement retardé (ici, de 3 frames).				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Dans la vidéo ci-dessous, ces 3 frames de décalage local donnent le temps nécessaire à l'input distant, commencé à la 3ème frame, de nous arriver via internet. À la 6ème frame, nous aurons les inputs de chaque joueur et le jeu pourra continuer. Du moment que chaque input de l'adversaire voyage à travers le réseau dans cet intervalle de 3 frames, le jeu restera stable.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/44643b9427-1701364373/affectionatedescriptiveairedaleterrier.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Chaque joueur appuie sur un bouton à la même frame. Le délai artificiel du joueur local donne le temps à l'input du joueur distant de l'atteindre, donc les inputs de chaque joueur sont exécutés à la même frame.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Malheureusement, ce n'est pas la réalité d'internet.</p></div>
</div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Les problèmes du netcode à base de délai    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Bien qu’ajouter du délai ne soit pas idéal, s’il est suffisamment léger, beaucoup de joueurs ne sont <strong>pas capables de le remarquer</strong>. Cependant, peu importe le nombre de frames, cela a un impact sur votre jeu. Votre capacité à réagir s’en trouvera diminuée, créant une expérience totalement différente du jeu hors-ligne. <strong>La prise en compte du délai dans la conception du jeu</strong>, ainsi que <strong>sa stabilité</strong> limite les effets négatifs. Cela permet au mode en ligne d’être un terrain d’entraînement acceptable à défaut d’idéal.</p><p>En effet, le problème principal c’est qu’<strong>internet n’est pas connu pour sa stabilité</strong>. Et manque de chance, les technologies basées sur le délai en pâtissent. Supposons qu'il y ait un pic dans la connexion et qu'une information provenant de l'adversaire prenne un peu plus de temps que les 3 frames prévues. Parce que le jeu ne peut tout simplement pas continuer sans les informations attendues, <strong>il n'a d'autre choix que de s'arrêter et d’attendre</strong>. Cette attente donne l’impression que le jeu rame.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/350243a184-1701364373/specificdearestabalone.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Ralenti à 30%, on peut voir que le jeu doit faire une pause suite à un problème de réseau. Un visionnage image par image nous apprend que l'input du joueur distant est perdu pendant 6 frames, le jeu n'a alors d'autre choix que d'attendre l'input avant de continuer.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Puisque mettre le jeu en pause même brièvement a un impact sur l'expérience du joueur, la plupart des technologies basées sur le délai rusent afin d’en limiter les effets négatifs.</p><p>En surveillant les conditions du réseau, elles peuvent <strong>changer ce délai en temps réel</strong> afin de s'aligner sur l'état actuel de la connexion. Mais parce que le comportement du réseau est très difficile à prédire, ce changement de délai arrive souvent trop tard. Le jeu subit quelques pauses, et l'augmentation de ce délai dure souvent plus de temps que nécessaire.</p><p>Par exemple, avant de <a href="https://www.polygon.com/2016/1/15/10776282/mortal-kombat-x-network-code-ggpo" rel="noopener noreferrer nofollow">changer de technologie</a> et d’adopter le rollback, le netcode à base de délai de Mortal Kombat X pouvait fluctuer entre 5 et 20 frames. Un ping subitement élevé augmentait le délai pendant de nombreuses secondes, même si cette hausse de ping n'avait affecté que quelques frames. Cela peut <a href="https://www.twitch.tv/videos/376451551?t=02h15m37s" rel="noopener noreferrer nofollow">mener à des situations</a> où les joueurs ressentent que le jeu rame <a href="https://www.youtube.com/watch?v=tft6LBp3lZI&amp;feature=youtu.be&amp;t=1782" rel="noopener noreferrer nofollow">beaucoup plus</a> qu’indiqué.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/05d103cc2b-1701364373/unripecheapibisbill.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Guilty Gear Xrd modifie le délai en temps réel, espérant ainsi éviter de mettre le jeu en « pause » pour attendre des inputs. Quelque fois ces fluctuations sont petites, d'autres fois elles sont complètement hors de contrôle.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Le netcode à base de délai est aussi extrêmement sensible à la distance qui vous sépare de votre adversaire. Une plus grande distance augmente le temps que mettent les informations à voyager à travers le réseau, obligeant le jeu à augmenter le délai. La distance joue un facteur dans toutes les connexions en ligne peu importe le choix du netcode, réduisant de facto les chances d’unir une communauté au niveau mondial.</p><p>Enfin, un dernier défaut peut-être peu évident à première vue, c'est que les solutions à base de délai <strong>ne se soucient pas de l'état du jeu</strong>. Que l'annonceur soit en train de dire « Round 2, Fight », que l'adversaire soit mis au sol, que les deux joueurs soient en train de marcher en neutral ; un jeu à base de délai traite unilatéralement les problèmes de connexion. Cela veut dire, et on y reviendra, qu'il n'y a pas de moyen d’atténuer une mauvaise connexion.</p><p>Pour conclure, les solutions à base de délai ne permettent pas une bonne expérience utilisateur puisqu’<strong>à l'inverse du jeu hors-ligne, les inputs des joueurs ne sont pas réguliers</strong>. Les joueurs de jeux de combat s'améliorent en mémorisant des situations où les réactions et les réflexes priment. Ces situations doivent être reproductibles à l’identique. Si l'adversaire saute, je dois pouvoir faire un anti-air. Si je touche avec ce début de combo, je dois pouvoir continuer grâce à ma mémoire musculaire. Quand je mets mon adversaire au sol, je peux appliquer une stratégie spécifique. Quand le délai fluctue de manière imprévisible, que cela soit entre deux matches différents ou durant le même match, les joueurs finissent par douter. Est-ce eux qui ont raté, ou est-ce dû au délai ? Quand les joueurs sont incapables d'exécuter leur stratégie, <strong>jouer sur internet devient frustrant</strong> et même inutile.</p></div>
</div>                                    <div class="magazine__full-img white-bg">

            <img loading="lazy"
            class="lazy"
            src="/media/pages/articles/le-netcode-des-jeux-de-combat/ab5f885b95-1701364373/punch-planet-300x-blur1-q20.jpg"
            data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/ab5f885b95-1701364373/punch-planet-600x.jpg 600w"
            data-srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/ab5f885b95-1701364373/punch-planet-600x.jpg 600w, /media/pages/articles/le-netcode-des-jeux-de-combat/ab5f885b95-1701364373/punch-planet-800x.jpg 800w, /media/pages/articles/le-netcode-des-jeux-de-combat/ab5f885b95-1701364373/punch-planet-1600x.jpg 1600w" />
                <div class="magazine__full-img__citation">
            <div class="magazine__citation">Punch Planet utilise le netcode rollback !</div>
        </div>
    </div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Mais, et si j'ai une bonne connexion ?    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Qu’on se le dise : les gens surestiment grandement leur connexion. Bien qu'il soit possible que vous ayez une connexion rapide et stable avec les personnes proches de vous, qu’en est-il des autres ? Certains joueurs peuvent être loin de vous ou perdre des informations sur le réseau. Même deux personnes vivant proches l’une de l’autre et naviguant habituellement vite sur internet peuvent avoir des difficultés à maintenir une connexion stable, pour des raisons entièrement hors de leur contrôle.</p><p>Bien sûr, avec certaines connexions, des matches en ligne sur des jeux avec délai peuvent bien se passer. Cependant, le netcode doit être jugé sur <a href="https://twitter.com/TheKeits/status/1053011895404367872?s=20" rel="noopener noreferrer nofollow">les mauvaises connexions, pas les bonnes</a>. Si l'on se base sur une connexion parfaite avec des inputs toujours bien synchronisés, il n'y a pas besoin d'une quelconque stratégie pour se rapprocher d'une expérience hors-ligne ; on a déjà atteint l’objectif !</p><p><strong>Le travail du netcode, c’est justement de cacher habilement la latence</strong>. S’il échoue au plus petit signe d’instabilité du réseau, alors il ne peut être considéré comme efficace.</p></div>
</div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Pourquoi utilise-t-on toujours le délai ?    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>La raison principale pour laquelle tant de jeux de combat implémentent un netcode à base de délai, c'est <strong>parce que c'est simple</strong>. La logique du gameplay est inchangée comparée au jeu hors-ligne, puisqu'on considère que les inputs des deux joueurs sont enregistrés au début de la boucle de jeu. Il n'y a pas non plus besoin d’optimiser le jeu pour qu’il fonctionne en ligne. La machine consomme autant de ressources pour un match hors-ligne que pour un match en ligne. C'est l'option la plus rentable pour les développeurs qui souhaitent proposer du jeu en ligne.</p><p>Aujourd’hui, les développeurs japonais sont les principaux utilisateurs du netcode à base de délai, alors que tous les jeux de combat développés en Occident <strong>sont passés au rollback</strong>. On parle de titres de gros éditeurs, comme Killer Instinct et Mortal Kombat 11, et de titres indés plus modestes comme Skullgirls, Punch Planet, Pocket Rumble, et Them's Fightin' Herds. Il est fort probable que les vastes zones géographiques d'Europe et d'Amérique aient encouragé ces développeurs à faire du netcode une plus grande priorité. Mais ce n'est pas comme si les japonais étaient exempts de <a href="mauvaises connexions" rel="noopener noreferrer nofollow">mauvaises connexions</a> et des <a href="https://clips.twitch.tv/GloriousKnottyCardPeteZaroll" rel="noopener noreferrer nofollow">frustrations liées à un mauvais netcode</a>.</p><p>De part la pression des fans et les tendances de l'industrie, il est de plus en plus improbable que les développeurs japonais ne soient pas conscients de l’existence du rollback.</p><p>Capcom, un des grands développeurs japonais de jeux de combat, a tenté le netcode rollback sur trois titres différents (Street Fighter x Tekken, Street Fighter V, Marvel vs. Capcom Infinite), avec un <a href="https://twitter.com/yukimayucom/status/1169970222167724033" rel="noopener noreferrer nofollow">degré de succès variable</a>. Daisuke Ishiwatari, Responsable Créatif chez Arc System Works, a admis que les fans lui ont demandé de s'intéresser au netcode rollback à de nombreuses reprises, mais <a href="https://venturebeat.com/2018/03/05/how-arc-system-works-is-aiming-for-a-simpler-fighter-with-blazblue-cross-tag-battle/" rel="noopener noreferrer nofollow">Arc System Works a quand même choisi d'utiliser le netcode à base de délai</a> pour leur jeu Blazblue : Cross Tag Battle sorti en 2018.</p><p>Des <a href="https://youtu.be/qW61xJNJ9m8?t=12" rel="noopener noreferrer nofollow">fans</a> (et même des <a href="https://youtu.be/Tu2kAdmUCaI?t=2594" rel="noopener noreferrer nofollow">développeurs</a>) ont émis l'hypothèse selon laquelle certains studios préfèrent réinventer la roue, un souci qui semble <a href="https://www.eurogamer.net/articles/2012-10-10-tokyo-story-a-postcard-from-the-japanese-games-industry" rel="noopener noreferrer nofollow">surtout affecter les studios japonais</a>. Mais parce que tant de jeux de combat populaires dans notre communauté sont créés au Japon, le netcode à base de délai reste la norme. Plus d'une décennie après l'invention du netcode rollback, seul 1 des 9 jeux présents à l'EVO 2020 utilise le rollback pour son multijoueur en ligne. Et encore, la qualité du netcode de ce dernier ne fait l'unanimité.</p><p>Ces précisions établies, expliquons le fonctionnement du rollback.</p></div>
</div>                                    <div class="magazine__full-img white-bg">

            <img loading="lazy"
            class="lazy"
            src="/media/pages/articles/le-netcode-des-jeux-de-combat/1eded6e02a-1701364373/lethalleague-300x-blur1-q20.jpg"
            data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/1eded6e02a-1701364373/lethalleague-600x.jpg 600w"
            data-srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/1eded6e02a-1701364373/lethalleague-600x.jpg 600w, /media/pages/articles/le-netcode-des-jeux-de-combat/1eded6e02a-1701364373/lethalleague-800x.jpg 800w, /media/pages/articles/le-netcode-des-jeux-de-combat/1eded6e02a-1701364373/lethalleague-1600x.jpg 1600w" />
                <div class="magazine__full-img__citation">
            <div class="magazine__citation">Lethal League Blaze utilise le netcode rollback !</div>
        </div>
    </div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Le netcode rollback    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>On l’a vu, un netcode ne peut pas ignorer la distance séparant les joueurs ni empêcher la perte d’information entre eux. Ces problèmes étant inévitables, comment une technologie pourrait-elle être supérieure à une autre ? Dans le cas du rollback, l’amélioration vient de <strong>la gestion de l’incertitude</strong>.</p><p>Quand il n'y a pas d'information provenant du joueur distant, le netcode à base de délai a besoin de faire une pause et d'attendre. La principale qualité du rollback, c'est qu'<strong>il n'attend pas</strong>, même si un input de l’adversaire viendrait à manquer. Au lieu de cela, le rollback continue de faire tourner le jeu normalement. Tous les inputs du joueur local sont <strong>enregistrés immédiatement</strong>, comme si l'on était hors-ligne. Puis, quand les inputs du joueur distant arrivent quelques frames plus tard, le rollback résout ses erreurs <strong>en corrigeant le passé</strong>. Cette stratégie est tellement habile que le joueur local pourrait même ne pas remarquer une grande partie des instabilités du réseau. Il peut jouer en sachant que <strong>ses inputs sont stables</strong>.</p><p>Mais intéressons-nous tout d'abord à ce qu'est le « rollback ».</p></div>
</div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Agir maintenant et s'excuser plus tard    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Quand des inputs distants n'arrivent pas à destination, le netcode rollback continue quand même à simuler le jeu. Fatalement, quand ces inputs finissent par arriver, le jeu est en avance par rapport au moment où l'adversaire a appuyé sur ce bouton. Le jeu a déjà affiché un résultat différent à l'écran. Pour résoudre ce problème, le netcode rollback va <strong>rembobiner le jeu</strong>. Il va appliquer le bon input et immédiatement afficher le nouveau résultat au joueur qui était en avance.</p><p>Dans l'exemple ci-dessous, le joueur local et le joueur distant appuient tous deux sur le bouton poing moyen à la frame 1, mais disons que l'input de l'adversaire est retardé à travers le réseau et nous arrive trois frames plus tard, à la frame 4. Comme pour le jeu hors-ligne, l’attaque du joueur local entame son animation immédiatement sur son écran. Le jeu fait son petit bonhomme de chemin en considérant que l'adversaire n'a rien fait. À la frame 4, l'input de l'adversaire, noté comme ayant été exécuté à la frame 1, arrive finalement. Cela veut dire que ce que l'on a montré au joueur local dans les 3 frames précédentes n'est pas ce qu'il s'est passé. Le jeu doit alors <strong>corriger le passé</strong> en effectuant quelques calculs en arrière-plan.</p><p>Tout d'abord, l'état du jeu est rechargé à ce qu'il était avant la frame 1 – c'est-à-dire, il « rollback » (littéralement, il recule) dans le passé jusqu'à la frame où l'input doit être appliqué. Ensuite, les inputs du joueur distant, ainsi que les anciens inputs du joueur local, sont appliqués. Enfin, le jeu re-simule plusieurs frames en avant afin d'atteindre de nouveau la frame présente.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/1188edd2cf-1701364373/wellmadeleftarrowana.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Sur ce match en ligne, le Jago adverse appuie sur MP à la frame 1. Quand son attaque nous parvient, nous sommes déjà à la frame 4. Donc nous devons rembobiner jusqu'à la frame 1, déclencher l’attaque de Jago, puis re-simuler tous les états du jeu jusqu'à la frame 4. Dans cette vidéo, le filtre orange et la version « fantôme » de Jago indiquent les calculs d'arrière-plan invisibles pour le joueur. À 30% de la vitesse du jeu, on peut voir que le MP de Jago commence au milieu de son animation.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Tous ces calculs, toutes ces opérations <strong>se passent instantanément</strong>, en 1 frame de jeu ; le joueur local ne voit jamais ces étapes se dérouler individuellement. Au lieu de cela, tout ce qu'il peut voir, c'est l'état du jeu qu'il pensait être correct (alors qu'il était faux) se faire immédiatement remplacer par le vrai état du jeu.</p><p>Selon ce qui arrive en jeu, les personnages peuvent avoir un <strong>léger soubresaut</strong>, et <strong>quelques frames d’animation au début du coup adverse sont supprimées</strong> chez le joueur local.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/87712731da-1701364373/cooperativegentlebillygoat.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Jago attaque avec un overhead. La vidéo montre le coup avec 0, 1, 2 ou 3 frames de rollback pile au moment où Jago attaque, ce qui élimine le même nombre de frames au début du coup. Même ralenti à 30%, il est difficile d'y voir une différence.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>En d'autres termes, le rollback permet à chaque machine de <strong>casser temporairement la règle du lockstep</strong>. Le jeu peut afficher des choses différentes pour chaque joueur en fonction de la qualité de la connexion et de ce qu'il se passe au moment des rembobinages. Cependant, le jeu <strong>se corrigera toujours lui-même</strong> pour afficher la même chose aux deux joueurs lorsque les inputs sont reçus quelques frames plus tard.</p><p>Il est utile de répéter cette propriété importante du netcode rollback ; <strong>les inputs du joueur local sont toujours affichés immédiatement et ne peuvent jamais être annulés</strong>. Si vous appuyez sur un bouton à la frame 4, cette information est immédiatement traitée par votre jeu, et votre coup sort instantanément sur votre écran. Si du rollback se passe quand vous avez appuyé sur ce bouton, il est toujours ré-appliqué correctement durant les calculs du rollback. Il n'y a ainsi aucun moyen que votre input soit invalide ou « mangé » par le réseau, ce qui peut arriver dans les netcodes à base de délai.</p><p>Par conséquent, les joueurs sont sûrs que les boutons sur lesquels ils appuient seront exécutés peu importe la qualité du réseau. Cela <strong>améliore drastiquement l’exactitude</strong> du jeu en ligne.</p><p>Cerise sur le gâteau, si une information est perdue sur le réseau, il n'y aura de rollbacks que sur les frames concernées par cette perte. À l’inverse, avec le netcode basé sur le délai, le jeu peut choisir d'augmenter le retard des inputs pendant de nombreuses secondes, même si le réseau s'est stabilisé entre temps. Le rollback est <strong>particulièrement bon pour les connexions qui ont tendance à perdre des informations</strong>, comme le WiFi.</p><p>Voici donc le concept initial du rollback. Mais on peut faire encore mieux.</p></div>
</div>                                    <div class="magazine__full-img white-bg">

            <img loading="lazy"
            class="lazy"
            src="/media/pages/articles/le-netcode-des-jeux-de-combat/97dc52c2f7-1701364373/acceleration-300x-blur1-q20.jpg"
            data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/97dc52c2f7-1701364373/acceleration-600x.jpg 600w"
            data-srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/97dc52c2f7-1701364373/acceleration-600x.jpg 600w, /media/pages/articles/le-netcode-des-jeux-de-combat/97dc52c2f7-1701364373/acceleration-800x.jpg 800w, /media/pages/articles/le-netcode-des-jeux-de-combat/97dc52c2f7-1701364373/acceleration-1600x.jpg 1600w" />
                <div class="magazine__full-img__citation">
            <div class="magazine__citation">Acceleration of SUGURI 2 utilise le netcode rollback !</div>
        </div>
    </div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Les bases de la prédiction    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Dans l'exemple ci-dessus, quand l'input du joueur distant est manquant, on considère qu'il ne fait rien pour permettre à la machine de simuler le jeu. Mais c'est une supposition plutôt candide car les joueurs ne font rarement rien ! Si l’on s’arrêtait à cette supposition, le jeu présenterait presque toujours l’adversaire de manière incorrecte. En vérité,<strong> on peut prédire ce que l'adversaire est en train de faire </strong>avec un degré de précision surprenant.</p><p>Quand un input est manquant car perdu par le réseau, le rollback <strong>simule le dernier input connu du joueur distant</strong> pour la frame manquante. S'il maintenait bas-arrière, le jeu prédit qu'il maintiendra bas-arrière enfoncé. S'il maintenait un bouton, le jeu suppose qu'il est probablement toujours en train de maintenir ce bouton enfoncé. Pour le joueur local, le jeu fonctionne avec les inputs supposés du joueur distant.</p><p>(N.B. : dans le but de garder ces exemples vidéo aussi accessibles que possible, on considérera temporairement que le temps de transmission du réseau est instantané et que lorsqu'il y a des frames manquantes, c'est parce que le réseau a été brièvement surchargé. Ne vous inquiétez pas, le concept fonctionne toujours très bien avec des retards réseau, mais les vidéos auraient été un peu trop déroutantes).</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/d4bbb02a01-1701364373/genuinemadeupleonberger.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Les inputs du Fulgore distant sont perdus après la frame 3, mais avec un netcode rollback, le jeu duplique le dernier input connu afin de rester sur sa lancée. Les frames prédites sont en orange, et le dernier input connu est indiqué par le chevron orange sous la case de la frame 3.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Quand les vrais inputs distants arrivent quelques frames plus tard, le jeu doit décider comment les utiliser. Si les inputs étaient incorrects, un rollback a lieu, comme décrit précédemment ; le jeu se rembobine jusqu'à un ancien état et utilise les nouveaux inputs pour continuer de simuler. Mais si ces inputs sont exactement tels que prédits (par exemple, le joueur a bien maintenu bas-arrière enfoncé), <strong>aucun rollback n'est nécessaire </strong>; la prédiction affichée au joueur était correcte !</p><p>Le jeu met simplement à jour le dernier input correct et connu du joueur distant, tandis que le joueur local n’y voit que du feu. Quand le jeu prédit correctement les inputs, le rollback permet <strong>une sensation de jeu parfaite</strong>, même s’il y a des problèmes réseau.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/f7e43aa756-1701364373/jampackeddismalatlanticsharpnosepuffer.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Les inputs du Fulgore distant sont, encore une fois, perdus après la frame 3. Les inputs arrivent d'un coup à la frame 8, et Fulgore a bien maintenu la direction avant, comme dans notre prédiction. Le jeu vérifie rapidement si la prédiction s'est réalisée et continue sans même avoir besoin de rollback !				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>La prédiction peut sembler anecdotique mais elle a un impact énorme. Reculer dans le temps et re-simuler le jeu uniquement si le joueur distant a fait quelque chose de différent possède beaucoup d'avantages. En particulier, <strong>cacher les effets d'une mauvaise connexion</strong>.</p></div>
</div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Pourquoi la prédiction est aussi éfficace    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Contrairement à d’autres types de jeu comme les FPS, la prédiction dans le jeu de combat n’est pas aussi complexe qu’on pourrait l’imaginer. Comme dit précédemment, tout ce qu'elle fait, c'est <strong>vérifier que les inputs du joueur distant n'ont pas changé depuis la dernière fois</strong>.</p><p>Si l’on regarde la fréquence à laquelle les joueurs changent d’input dans un jeu comme Street Fighter où les joueurs vont et viennent en marchant ; on va considérer qu'un joueur change de direction environ 5 fois par seconde, une plutôt bonne fourchette même pour les joueurs très actifs. On a besoin des inputs du joueur distant sur seulement 5 des 60 frames d'une seconde donnée (uniquement 8% du temps). Pour les 55 frames restantes, les inputs du joueur peuvent être prédits avec un grand degré de précision, simplement en supposant qu'ils sont les mêmes qu'à la frame précédente.</p><p>Et là, on parle de la partie la plus active du match. Si vous avez mis votre adversaire au sol et que vous tapez dans sa garde, il est assez courant pour le joueur qui défend de simplement maintenir bas-arrière pendant 30, 60, ou 120 frames consécutives. Si votre adversaire saute, il est en saut pendant environ 45 frames et il y a des chances pour qu'il n'appuie que sur un seul bouton pendant tout ce temps. Pourquoi devrait-on attendre que le réseau nous communique l'information si la prédiction s'avère correcte 95% du temps ?</p><p>Cela veut dire que si un retard a lieu durant un moment où l'input distant est inchangé, il est complètement <strong>invisible pour les deux joueurs</strong>. Même avec des connexions aléatoires où l'information peut arriver en retard de nombreuses fois par seconde, un gros pourcentage de ces retards coïncide avec des moments où le joueur distant n'a pas changé ses inputs. Un jeu basé sur le délai serait obligé de se mettre en pause et d'attendre. Mais parce qu'un jeu avec rollback vérifie que les actions du joueur distant sont conformes à sa prédiction, la machine n'a pas besoin de changer quoi que ce soit. La connexion semble parfaite.</p></div>
</div>                                    <div class="magazine__full-img white-bg">

            <img loading="lazy"
            class="lazy"
            src="/media/pages/articles/le-netcode-des-jeux-de-combat/29bb14ae60-1701364373/brawlhalla-300x-blur1-q20.jpg"
            data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/29bb14ae60-1701364373/brawlhalla-600x.jpg 600w"
            data-srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/29bb14ae60-1701364373/brawlhalla-600x.jpg 600w, /media/pages/articles/le-netcode-des-jeux-de-combat/29bb14ae60-1701364373/brawlhalla-800x.jpg 800w, /media/pages/articles/le-netcode-des-jeux-de-combat/29bb14ae60-1701364373/brawlhalla-1600x.jpg 1600w" />
                <div class="magazine__full-img__citation">
            <div class="magazine__citation">Brawlhalla utilise le netcode rollback !</div>
        </div>
    </div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Le rollback dépend de l'état du jeu    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Ce n’est pas tout, car le rollback emploie d’autres méthodes pour atténuer les effets des mauvaises connexions. Contrairement aux technologies à base de délai qui peuvent stopper le jeu à n’importe quel moment, le rollback n’intervient que si les inputs du joueur distant ont effectivement changé l'état du jeu.</p><p>Expliquons ceci en vidéo. Ci-dessous, l'adversaire distant jouant Jago utilise un gros poing à la frame 2. Le jeu local reçoit l'input correctement et commence à animer le coup. Juste après avoir appuyé sur gros poing, il y a un ralentissement et toutes les informations pour les 5 prochaines frames n'arrivent pas à temps. Comme nous l’avons expliqué, le rollback ne s'en soucie guère ; il continue à simuler le jeu dans tous les cas. Dans ce cas précis, il considérera que Jago n’a entré aucun input, puisqu'il a relâché le bouton gros poing à la dernière frame connue.</p><p>Six frames dans le futur, à la frame 8, toutes les informations des 5 frames manquantes arrivent d'un coup. Il se trouve que Jago appuyait sur des boutons ! Ce n'est pas ce qui était prédit, donc la machine rembobine le jeu de de 5 frames, au début du gros poing, re-simule ces 5 frames avec le bon input, et affiche ce qui se passe vraiment.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/a2bf4ddda9-1701364373/quickbrownboar.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Jago appuie sur HP, mais après cela, les inputs sont perdus pendant un moment. Le rollback simule la suite. Lorsque ces inputs manquants arrivent, il s'avère que Jago appuyait sur des boutons ; ça ne colle pas à la prédiction, donc rembobinage et re-simulation. Mais le résultat final est identique, donc les joueurs ne s’en rendent même pas compte.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Cependant, le système de jeu de Killer Instinct interdit d’annuler un coup par un autre dans cette situation. Ces nouveaux inputs n'ont donc <strong>rien changé</strong> à l'état du jeu ! Même si le jeu est revenu en arrière et a re-simulé de multiples frames, le résultat final était le même que celui affiché à l'écran ; et encore une fois, <strong>le retard est complètement invisible</strong> pour les deux joueurs.</p><p>Il y a en fait de nombreux moments où notre adversaire ne peut rien faire car le système de jeu ne le permet pas. Lorsqu’il est mis au sol, qu’il subit un combo, qu’il garde un pressing, qu’il lance, finit ou rate un coup. Toutes ces actions prennent un temps conséquent. Une mise au sol dans Street Fighter peut prendre jusqu’à 60 frames. Les attaques fortes près de 30 frames ou plus si faites dans le vent. Les combos peuvent durer jusqu’à 10 secondes ! Même si la connexion devenait chaotique, cela n’aurait <strong>aucune influence</strong> dans ces situations. Tant que la machine a bien enregistré le début de ces actions, il n’est de toute façon pas permis de les modifier.</p><p>En ajoutant la prédiction à ces règles de jeu immuables, une quantité de problèmes réseau sont « absorbés » durant un match. Les problèmes de connexion n'ont pas disparu, mais le rollback les camoufle dès que possible et permet même de jouer avec les plus mauvaises connexions. Dans le cas de Killer Instinct, il permet des matches en ligne <a href="https://www.youtube.com/watch?v=cjLTavtPniA" rel="noopener noreferrer nofollow">entre Singapour et l'Est des États-Unis</a> malgré un ping de 200 millisecondes, soit 6 frames. Impensable avec n'importe quel netcode à base de délai.</p></div>
</div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Peut-on couper la poire en deux ?    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Vous en avez peut-être déduit – à juste titre – que chaque bouton enfoncé ou changement de direction de l'adversaire cause un vérification et un rembobinage parfois inutile de l’état du jeu.</p><p>Il s'avère qu'on peut éliminer ces micro-rembobinages en <strong>combinant les techniques à base de délai et de rollback</strong>. En fait, tout jeu de combat moderne qui utilise le rollback repose sur une structure à base de délai. Avec cependant une nuance importante : <strong>le délai est stable et fixé d'avance</strong>. Si ce délai est suffisamment bas, les inputs de votre adversaire arriveront sans avoir besoin de rembobiner à chaque changement d'état du jeu. En cas de souci sur le réseau, le rollback prend le relai.</p><p>Quand le délai est <strong>bas et stable</strong>, les joueurs peuvent s’adapter à sa présence. Avec le temps, beaucoup ne remarquent plus la différence avec le jeu hors-ligne.</p><p>La quantité de délai fixée par les développeurs pour garantir cette stabilité dépend des jeux. Certains comme <a href="https://ki.infil.net/images/words/w02/3soeggpo.jpg" rel="noopener noreferrer nofollow">3rd Strike Online Edition</a>, <a href="https://ki.infil.net/images/words/w02/darkstalkersggpo.jpg" rel="noopener noreferrer nofollow">Darkstalkers Resurrection</a>, <a href="https://ki.infil.net/images/words/w02/skullgirlsggpo.png" rel="noopener noreferrer nofollow">Skullgirls</a> et <a href="https://ki.infil.net/images/words/w02/samshovggpo.jpg" rel="noopener noreferrer nofollow">Samurai Shodown V Special</a>, laissent le choix du délai à l'utilisateur, habituellement entre 0 et 8 frames.</p><p>D'autres jeux, comme Killer Instinct et Injustice 2, choisissent un délai universel pour tous les joueurs (3 frames en l’occurrence) et ne donnent pas l'option d’en changer.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
	
			
			<img loading="lazy" 
				class="lazy" 
				src="/media/pages/articles/le-netcode-des-jeux-de-combat/3285e4ab52-1701364373/skullgirlsggpo-200x-blur1-q20.png"
				data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/3285e4ab52-1701364373/skullgirlsggpo-400x.png 400w" 
				data-srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/3285e4ab52-1701364373/skullgirlsggpo-400x.png 400w, /media/pages/articles/le-netcode-des-jeux-de-combat/3285e4ab52-1701364373/skullgirlsggpo-600x.png 600w, /media/pages/articles/le-netcode-des-jeux-de-combat/3285e4ab52-1701364373/skullgirlsggpo-800x.png 800w"/> 
							<figcaption class="magazine__sub-image-citation">
				<small>
					Skullgirls laisse chaque utilisateur choisir manuellement le nombre de frames de délai. Le rollback n’est déclenché que si le délai du réseau est plus important que ce chiffre.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Les deux méthodes ont leurs avantages et inconvénients. Autoriser le joueur à choisir son propre délai lui permet de prendre en compte la qualité de la connexion et d'ajuster le délai en fonction. Mais encore faut-il comprendre comment le rollback fonctionne, pour ne pas se tromper de configuration. Définir arbitrairement un délai unique pour tout le monde signifie qu’en théorie, certains matches auront un peu plus de délai que nécessaire. Mais en contrepartie, cela permet d’avoir une base commune pour toutes les connexions, limitant la nécessité de s’adapter à différents délais.</p></div>
</div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Un récapitulatif des avantages du rollback    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Le rollback ne crée pas de <strong>retard variable</strong> dans les inputs, véritable fléau des solutions à base de délai. Le joueur local n'est pas affecté par les problèmes de réseau, ce qui permet de toujours traiter ses inputs de la même façon. Si vous effectuez un setup de mise-au-sol spécifique, ou si vous avez un combo avec un timing très serré, le rollback vous permet toujours de l'exécuter de la même façon peu importe les problèmes de connexion. Si une information est perdue, cela n’affecte que le moment présent, tandis qu'un jeu à base de délai augmente le délai d'inputs pendant de nombreuses secondes.</p><p>Une grande partie de l'instabilité du réseau est tout simplement <strong>rendue invisible</strong> grâce au netcode rollback. Chaque fois que le joueur distant ne peut pas modifier l’état de son personnage ; chaque fois qu'il choisit de répéter l’action (ou l’inaction) de la frame précédente, le système rollback ne produit aucun changement visuel. Le problème réseau est invisible sur cette période de temps. Au passage, cela affecte aussi les objets non-contrôlés par votre adversaire comme les boules de feu. Une fois lancées, le rollback ne peut pas changer leurs trajectoires ou vitesses, ce qui permet de bloquer ou sauter par-dessus avec le même timing qu'hors-ligne.</p><p><strong>Le rollback est la meilleure solution pour cacher le lag dans les jeux de combat</strong>. À présent, il est temps de parler des conditions d’implémentation du netcode rollback.</p></div>
</div>                                    <div class="magazine__full-img white-bg">

            <img loading="lazy"
            class="lazy"
            src="/media/pages/articles/le-netcode-des-jeux-de-combat/f14bb2b799-1701364373/pw-300x-blur1-q20.jpg"
            data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/f14bb2b799-1701364373/pw-600x.jpg 600w"
            data-srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/f14bb2b799-1701364373/pw-600x.jpg 600w, /media/pages/articles/le-netcode-des-jeux-de-combat/f14bb2b799-1701364373/pw-800x.jpg 800w, /media/pages/articles/le-netcode-des-jeux-de-combat/f14bb2b799-1701364373/pw-1600x.jpg 1600w" />
                <div class="magazine__full-img__citation">
            <div class="magazine__citation">Power Rangers : Battle for the Grid utilise le netcode rollback !</div>
        </div>
    </div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      L'aspect technique du netcode rollback    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Comment est construit un netcode rollback ? Qu’est-ce qu’un jeu doit faire pour l’utiliser ? Pourquoi autant de studios ont du mal à s’y mettre ?</p><p>Implémenter le rollback <strong>demande du travail</strong> et de la détermination. Avant toute chose, il faut avoir envie de créer du jeu en ligne de qualité.</p></div>
</div>                                    <div class="magazine-container--large">
	<div class="magazine__tweet">
		Voici une liste de choses qu'il faut gérer de manière spécifique pour pouvoir utiliser le rollback par rapport au netcode basé sur le délai : <br><br>- Séparer le gameplay de la couche de présentation <br>- État du jeu sérialisable <br>- Simulation des particules <br>- Durée de vie des objets <br>- Effets sonores <br>- Système d'animations <br>- Interface utilisateur <br>- Détection des désynchronisations		<div class="magazine__tweet-meta">
			— Zinac (@Zinac) <a href="	https://twitter.com/CMZinac/status/1181878689270599680">
			2019-10-09			</a>
	</div>
			<small class="magazine__tweet-context">
					</small>
	</div>
	<span class="magazine__tweet-icon">
	<svg id="da17e64a-e0ea-4cb3-8e48-f1506e7af337" data-name="Calque 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.3 15.76"><defs><style>.\36 d21c68d-0792-4fd6-83e6-6b8c86d6803b{fill:#1da1f2}</style></defs><title>tw</title><path class="6d21c68d-0792-4fd6-83e6-6b8c86d6803b" d="M634.53 3382.23a8.09 8.09 0 0 0 5.84-1.67 4.06 4.06 0 0 1-3.73-2.76 3.92 3.92 0 0 0 1.78-.08 4 4 0 0 1-2.27-1.4 4 4 0 0 1-.89-2.54 3.84 3.84 0 0 0 1.78.47 4 4 0 0 1-1.64-2.41 3.93 3.93 0 0 1 .42-2.88 11.41 11.41 0 0 0 8.22 4.16c0-.16 0-.29-.06-.43a3.9 3.9 0 0 1 1-3.19 3.74 3.74 0 0 1 2.1-1.2 3.89 3.89 0 0 1 3.6 1.05.28.28 0 0 0 .3.09 8.19 8.19 0 0 0 2.27-.88 3.5 3.5 0 0 1-.65 1.23 4.11 4.11 0 0 1-1 .92l.56-.09.55-.13.55-.17.55-.21-.06.1a8 8 0 0 1-1.79 1.85.21.21 0 0 0-.1.2 10.74 10.74 0 0 1-.06 1.63 11.79 11.79 0 0 1-1.24 4.05 11.19 11.19 0 0 1-3.39 4 10.67 10.67 0 0 1-4.21 1.83 11.94 11.94 0 0 1-2.86.22 11.18 11.18 0 0 1-5.19-1.5l-.35-.21z" transform="translate(-634.53 -3368.23)"/></svg>
	</span>
	
</div>
                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Pour rappeler brièvement comment le rollback fonctionne, quand les inputs distants sont inconnus, le jeu prédit la suite avec les inputs déjà connus. Si ces prédictions s'avèrent incorrectes lorsque l'input réel est reçu, le jeu recule dans le temps en chargeant un précédent état du jeu et en re-simulant la logique du jeu.</p><p>Par conséquent, le prérequis principal d'un jeu avec rollback, c'est qu'il soit capable de <strong>sauvegarder et charger différents états du jeu</strong>. Il doit pouvoir <strong>simuler la logique du jeu en arrière-plan</strong> et cela <strong>très rapidement</strong>. Cette condition simple sur le papier peut être un véritable casse tête.</p><p>L'action de convertir des objets dans la mémoire de l'ordinateur en un format qui puisse être sauvegardé et chargé est appelée sérialisation. L'état du jeu à chaque frame doit être sérialisé et sauvegardé, au cas où nous aurions besoin de rembobiner. Cela signifie que la sérialisation de l'état du jeu, qui est une opération qui peut prendre du temps selon les données à traiter, doit être <strong>instantanée et très bien optimisée</strong>.</p><p>Si ces performances ne sont pas satisfaisantes, il faut alors revoir la façon dont les données sont stockées, et comment les différents systèmes du jeu les utilisent. Construire un jeu avec le rollback en amont réduira pour sûr la charge de travail en aval. En revanche, ajouter le rollback dans un jeu déjà existant peut nécessiter d'énormes changements au cœur même du jeu. Michael Stallone, ingénieur chez NetherRealm Studios, estime que <a href="https://youtu.be/7jb0FOcImdg?t=3343" rel="noopener noreferrer nofollow">cela a pris 2 années-homme</a> à son équipe pour construire et optimiser les systèmes de sérialisation de Mortal Kombat X lors de l’ajout du netcode rollback.</p><p>Si un jeu a besoin de rembobiner un nombre important de frames, le processus doit être parfaitement optimisé. Une fois que l'état du joueur distant a été désérialisé et chargé, le jeu doit re-simuler toutes les frames jusqu'au présent, puis les sérialiser ! Cela doit être fait vite et en arrière-plan. Par conséquent, <strong>la logique du gameplay doit être indépendante</strong> du reste de la boucle de jeu. Il faut pouvoir simuler toutes ces frames sans pour autant les afficher à l'écran, sans attendre le réseau, et sans <a href="https://youtu.be/7jb0FOcImdg?t=1570" rel="noopener noreferrer nofollow">dépendre d'autres systèmes</a> qui opèrent habituellement à chaque frame.</p><p>Selon le moteur choisi, ou à quel point les systèmes de boucle de jeu sont personnalisés, séparer et « éteindre » les autres sous-systèmes peut se révéler étonnamment difficile.</p><p>Parce que toutes ces opérations <strong>doivent être effectuées en l'espace d'une frame</strong>, l'optimisation devient un vrai casse-tête. Il est possible que les systèmes de particules ou de simulation de vêtements ne soient plus assez performants. Peut-être la puissance de la machine a-t-elle été surestimée.</p><p>Stallone prend l’exemple de Mortal Kombat X. Sous son ancienne solution à base de délai, sur une Playstation 4 ou une Xbox One, le titre ne prenait en moyenne que 10 millisecondes de son budget total de 16 pour calculer une frame. Quand l'équipe a implémenté puis testé sa solution rollback pour la première fois, le coût de calcul d’une frame avait plus que triplé pour <a href="https://youtu.be/7jb0FOcImdg?t=1299" rel="noopener noreferrer nofollow">s'élever à 32 millisecondes</a>. Résultat ? Obligé de repasser sur presque tous les systèmes du jeu pour gagner en performance.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
	
			
			<img loading="lazy" 
				class="lazy" 
				src="/media/pages/articles/le-netcode-des-jeux-de-combat/667d5be338-1701364373/nrsperformance-200x-blur1-q20.png"
				data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/667d5be338-1701364373/nrsperformance-400x.png 400w" 
				data-srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/667d5be338-1701364373/nrsperformance-400x.png 400w, /media/pages/articles/le-netcode-des-jeux-de-combat/667d5be338-1701364373/nrsperformance-600x.png 600w, /media/pages/articles/le-netcode-des-jeux-de-combat/667d5be338-1701364373/nrsperformance-800x.png 800w"/> 
							<figcaption class="magazine__sub-image-citation">
				<small>
					Un petit échantillon des choses que NetherRealm Studios a dû optimiser afin de faire tourner Mortal Kombat X suffisamment vite pour utiliser le rollback. Même pour un anglophone ça semble très compliqué. (<a href="https://youtu.be/7jb0FOcImdg?t=1671">source</a>)				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Profitons-en pour réfuter une idée reçue sur le rollback : il n'y a <strong>pas de limitation liée au genre du jeu</strong>. Le rollback peut être (et a été) utilisé pour des jeux de combat 2D tout comme des jeux de combat 3D, notamment Street Fighter III 3rd Strike: Online Edition, Killer Instinct, Brawlhalla, ou encore For Honor. Il est aussi utilisé en dehors des jeux de combat. Iron Galaxy a incorporé un netcode rollback dans le jeu d'action à 4 joueurs Dungeons &amp; Dragons: Chronicles of Mystara. Même des jeux comme <a href="https://www.youtube.com/watch?v=ueEmiDM94IE&amp;t=2352" rel="noopener noreferrer nofollow">Rocket League</a> utilisent le rollback afin de rendre l'expérience de jeu en ligne tout aussi réactive qu'hors-ligne.</p></div>
</div>                                    <div class="magazine__full-img white-bg">

            <img loading="lazy"
            class="lazy"
            src="/media/pages/articles/le-netcode-des-jeux-de-combat/f33cf508e5-1701364373/divekick-300x-blur1-q20.jpg"
            data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/f33cf508e5-1701364373/divekick-600x.jpg 600w"
            data-srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/f33cf508e5-1701364373/divekick-600x.jpg 600w, /media/pages/articles/le-netcode-des-jeux-de-combat/f33cf508e5-1701364373/divekick-800x.jpg 800w, /media/pages/articles/le-netcode-des-jeux-de-combat/f33cf508e5-1701364373/divekick-1600x.jpg 1600w" />
                <div class="magazine__full-img__citation">
            <div class="magazine__citation">Divekick utilise le netcode rollback !</div>
        </div>
    </div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Synchroniser le monde    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Toutes les solutions de jeu en réseau, peu importe qu’elles utilisent le délai ou le rollback, doivent maintenir les deux machines complètement synchronisées. Cela signifie que les deux machines montrent à chaque joueur la même frame au même moment, ou s’en approchent le plus possible.</p><p>Malgré leur framerate à 60 images par seconde, rien ne garantit que les joueurs resteront synchronisés pour toute la durée du match. Beaucoup de soucis indépendants du réseau, tels que la surchauffe pour les consoles ou le multitâche pour les ordinateurs peuvent causer une perte de performances qui peut désynchroniser les joueurs.</p><p>Une désynchronisation des joueurs qui n’est pas résolue rapidement a des effets catastrophiques. Considérons un système de rollback où l'on affiche la frame 20 au joueur A, mais où l'on affiche la frame 23 au joueur B, à travers un délai de 3 frames. Le joueur B envoie l'input de sa frame 23 au joueur A. Parce que le joueur A est à la frame 20, le délai du réseau fait qu'il recevra l'input à sa propre frame 23, juste à temps pour l'exécuter sans subir de rollback. Côté joueur A donc, tout va bien.</p><p>À son tour, le joueur A envoie son input pour la frame 20 au joueur B. Avec le délai du réseau, le joueur B recevra cet input sur sa frame 26 au lieu de sa frame 23, ce qui causera un rembobinage massif de 6 frames.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/4108c3c380-1701364373/edibleimaginaryfrilledlizard.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Un exemple de rollback à sens unique pour un joueur malchanceux. L'autre côté voit une version beaucoup plus normale du même match. Jouer dans ces conditions est impossible.				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Il faut noter que ce rollback est <strong>entièrement à sens unique</strong>. Seul le joueur qui est en avance par rapport à l'autre subira les effets de la mauvaise connexion. Tony Cannon, fondateur du rollback moderne avec GGPO, théorise que c'est l'<a href="https://youtu.be/k9JTIn1SVQ4?t=2038" rel="noopener noreferrer nofollow">un des défauts du système de rollback de Street Fighter V</a> ; et la cause de la mauvaise réception du rollback auprès des joueurs qui ne l’ont expérimenté qu’à travers ce jeu. Des fans ont également effectué leurs propres tests et sont arrivés à des conclusions similaires. Pour illustrer cet exemple, Zinac <a href="https://twitter.com/CMZinac/status/1183027367834308608" rel="noopener noreferrer nofollow">montre l'effet du rollback à sens-unique</a> en action en utilisant un projet très simple.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/fa68f35073-1701364373/blissfuldaringbluemorphobutterfly.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					L'exemple réseau de Zinac représente le P1 en rouge et le P2 en bleu ; il fait en sorte que le jeu de P2 soit plusieurs frames en avance par rapport à P1, sans possibilité de resynchronisation. Quand P2 bouge, P1, qui est en retard sur la synchronisation, voit le carré bleu bouger de manière fluide. Mais quand P1 bouge, P2, qui est en avance sur la synchronisation, subit de gros rembobinages. <a href="https://twitter.com/CMZinac/status/1183027367834308608" rel="noopener noreferrer nofollow">source</a>				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Le problème est relativement facile à résoudre. La plupart des systèmes rollback <a href="https://youtu.be/7jb0FOcImdg?t=2463" rel="noopener noreferrer nofollow">mettent le jeu du joueur qui est en avance en pause</a> pendant 1 ou 2 frames, afin que le joueur en retard puisse le rattraper. Si le jeu emploie ce système et qu'il ne laisse jamais les jeux se désynchroniser trop longtemps, la correction est rapide et indolore. Remarquez que ces pauses ne sont pas dues à des inputs manquants ou à d'autres difficultés du réseau ; elles sont pensées pour résoudre des problèmes de performances liés à l'hétérogénéité du matériel. Par exemple, les deux joueurs peuvent faire tourner le même jeu à des vitesses légèrement différentes. Dans ces conditions, perdre 1 frame toutes les 10 secondes afin de maintenir les jeux synchronisés passe inaperçu, même auprès des joueurs les plus aguerris.</p></div>
</div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Qu'est exactement GGPO ?    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Si vous avez un tant soit peu côtoyé la communauté des jeux de combat, vous avez sans doute entendu parler de <a href="https://www.ggpo.net" rel="noopener noreferrer nofollow">GGPO</a>, la solution rollback (<a href="https://github.com/pond3r/ggpo" rel="noopener noreferrer nofollow">désormais gratuite et open-source</a> !) écrite par <a href="https://twitter.com/Pond3r" rel="noopener noreferrer nofollow">Tony Cannon</a>, co-fondateur de l'EVO.</p><p>Vous entendrez souvent « GGPO » et « rollback » utilisés de manière interchangeable. La première version de GGPO, sortie en 2006, a été faite pour tester le concept du rollback via un émulateur. Peu de temps après, Cannon a sorti une version commerciale afin de permettre son implémentation dans d’autres jeux.</p><p>La principale fonction de GGPO est de fournir des outils pour <strong>synchroniser les machines et les états du jeu</strong>. Par exemple, GGPO peut communiquer au jeu si les deux machines sont désynchronisées, et dans quelle mesure. Il peut aussi surveiller les inputs de tous les joueurs connectés et indiquer quand rembobiner, de combien de frames, et quels nouveaux inputs doivent être appliqués.</p><p>Parce que GGPO est une solution testée et approuvée, c’est un excellent outil à adosser à tout projet souhaitant utiliser du rollback. Mais GGPO ne fait pas tout le travail. Améliorer les performances, gérer la séparation de la logique et de la boucle de jeu, s’occuper de tous les petits cas particuliers, tout cela <strong>reste à la charge des développeurs</strong>.</p><p>Autrement dit, GGPO se contente de communiquer quand et pourquoi un rembobinage est nécessaire et avec quels inputs, mais il ne fait rien d’autre. Cela en fait un outil flexible mais pas une solution miracle. C’est pour cette raison que d’autres jeux, comme Killer Instinct, n’utilisent pas GGPO, préférant leur propre solution.</p><p>Si la façon dont GGPO gère le rollback et communique avec les jeux vous intéresse, je vous recommande de lire cet excellent article (en anglais) écrit par Tony Cannon dans le <a href="https://drive.google.com/file/d/1nRa3cRBQmKj0-SEyrT_1VNOkPOJWNhVI/view" rel="noopener noreferrer nofollow">Game Developer Magazine</a>. Plutôt technique, il peut vous intéresser si vous êtes développeur ou tout simplement curieux. Vous pouvez également consulter le <a href="https://github.com/pond3r/ggpo" rel="noopener noreferrer nofollow">code source</a> et lire la <a href="https://github.com/pond3r/ggpo/tree/master/doc" rel="noopener noreferrer nofollow">documentation de Tony</a> quant à la théorie à l’origine du rollback.</p></div>
</div>                                    <div class="magazine__full-img white-bg">

            <img loading="lazy"
            class="lazy"
            src="/media/pages/articles/le-netcode-des-jeux-de-combat/6952f8174d-1701364373/ki-300x-blur1-q20.jpg"
            data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/6952f8174d-1701364373/ki-600x.jpg 600w"
            data-srcset="/media/pages/articles/le-netcode-des-jeux-de-combat/6952f8174d-1701364373/ki-600x.jpg 600w, /media/pages/articles/le-netcode-des-jeux-de-combat/6952f8174d-1701364373/ki-800x.jpg 800w, /media/pages/articles/le-netcode-des-jeux-de-combat/6952f8174d-1701364373/ki-1600x.jpg 1600w" />
                <div class="magazine__full-img__citation">
            <div class="magazine__citation">Killer Instinct utilise le netcode rollback !</div>
        </div>
    </div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Méfiez-vous des cas particuliers    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Comme si le rollback n'était pas assez compliqué, mentionnons quelques cas particuliers rencontrés lorsqu’il est implémenté dans un jeu de combat.</p><p><strong>Créer et détruire des objets</strong> non contrôlés directement par le joueur devient plus difficile. Admettons que le joueur local lance une boule de feu sur son adversaire. Ce dernier se prépare à la bloquer et s’accroupit en maintenant arrière. Dans la partie du joueur local, la boule de feu est bloquée et donc détruite en un amas de particules visuelles. Mais ! L’autre joueur passe au travers avec un coup invincible ! De son côté la boule de feu n’a pas été détruite et continue son chemin à travers l’écran.</p><p>Dans beaucoup de jeux, recréer un objet comme cette boule de feu est coûteux en ressources et peut résulter en un étrange sursaut visuel. Une solution possible est de <strong>garder les objets en mémoire après leur disparition</strong>. Si le rollback annule leur destruction, il faut donc re-simuler la logique du jeu. Avoir l’état des objets en mémoire facilite ce travail. C’est le cas des systèmes de particules, souvent simulées via des calculs, et qui demandent donc une <a href="https://youtu.be/7jb0FOcImdg?t=1894" rel="noopener noreferrer nofollow">attention toute particulière</a> lors de l’implémentation du rollback.</p><p>Le son est également un élément difficile à gérer dans les jeux avec rollback. Comme le rollback utilise la prédiction et que celle-ci peut-être fausse, il faut alors couper le son en cours pour le remplacer par autre chose. Cela signifie lire un son non pas depuis le début, mais depuis le moment où l’on en a besoin afin d’être synchronisé avec l’état du jeu. Encore une fois, il faut séparer la logique du jeu de tous les autres aspects.</p><p>Certains jeux en ont fait les frais. C’est le cas de Street Fighter x Tekken, dans lequel on subissait d'<a href="https://www.youtube.com/watch?v=e1XhaGBb6qs&amp;t=129" rel="noopener noreferrer nofollow">horribles bugs de son</a> tels que des absences pendant plusieurs secondes ou une totale désynchronisation. Dans un article pour <a href="https://drive.google.com/file/d/1nRa3cRBQmKj0-SEyrT_1VNOkPOJWNhVI/view" rel="noopener noreferrer nofollow">Games Developer Magazine</a>, Tony Cannon offre quelques conseils pour gérer l'audio dans un moteur rollback, plus précisément dans la section « Separating Game State from Rendering ».</p></div>
</div>                                    <div class="magazine-container--large">
	<div class="magazine__tweet">
		Donc désormais votre jeu effectue les rollbacks correctement et il est jouable, youhou ! Mais maintenant vous rencontrez des erreurs audio et visuelles, partout partout. Un son qui aurait dû être coupé par le rollback est toujours en train d’être joué. Que faire ?		<div class="magazine__tweet-meta">
			— Mauve (@Mauve) <a href="	https://twitter.com/mauvecow/status/1182087908460642304">
			2019-10-10			</a>
	</div>
			<small class="magazine__tweet-context">
					</small>
	</div>
	<span class="magazine__tweet-icon">
	<svg id="da17e64a-e0ea-4cb3-8e48-f1506e7af337" data-name="Calque 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.3 15.76"><defs><style>.\36 d21c68d-0792-4fd6-83e6-6b8c86d6803b{fill:#1da1f2}</style></defs><title>tw</title><path class="6d21c68d-0792-4fd6-83e6-6b8c86d6803b" d="M634.53 3382.23a8.09 8.09 0 0 0 5.84-1.67 4.06 4.06 0 0 1-3.73-2.76 3.92 3.92 0 0 0 1.78-.08 4 4 0 0 1-2.27-1.4 4 4 0 0 1-.89-2.54 3.84 3.84 0 0 0 1.78.47 4 4 0 0 1-1.64-2.41 3.93 3.93 0 0 1 .42-2.88 11.41 11.41 0 0 0 8.22 4.16c0-.16 0-.29-.06-.43a3.9 3.9 0 0 1 1-3.19 3.74 3.74 0 0 1 2.1-1.2 3.89 3.89 0 0 1 3.6 1.05.28.28 0 0 0 .3.09 8.19 8.19 0 0 0 2.27-.88 3.5 3.5 0 0 1-.65 1.23 4.11 4.11 0 0 1-1 .92l.56-.09.55-.13.55-.17.55-.21-.06.1a8 8 0 0 1-1.79 1.85.21.21 0 0 0-.1.2 10.74 10.74 0 0 1-.06 1.63 11.79 11.79 0 0 1-1.24 4.05 11.19 11.19 0 0 1-3.39 4 10.67 10.67 0 0 1-4.21 1.83 11.94 11.94 0 0 1-2.86.22 11.18 11.18 0 0 1-5.19-1.5l-.35-.21z" transform="translate(-634.53 -3368.23)"/></svg>
	</span>
	
</div>
                                    <div class="magazine-container--large">
	<div class="magazine__tweet">
		Contrairement à un jeu classique, il vous faut à présent surveiller à la loupe non seulement tous les sons joués, mais le statut de chaque son joué, et si oui ou non il a été « annulé » pour ce qui est arrivé lors du rollback. C'est pas simple !		<div class="magazine__tweet-meta">
			— Mauve (@Mauve) <a href="	https://twitter.com/mauvecow/status/1182088152195850240">
			2019-10-10			</a>
	</div>
			<small class="magazine__tweet-context">
					</small>
	</div>
	<span class="magazine__tweet-icon">
	<svg id="da17e64a-e0ea-4cb3-8e48-f1506e7af337" data-name="Calque 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.3 15.76"><defs><style>.\36 d21c68d-0792-4fd6-83e6-6b8c86d6803b{fill:#1da1f2}</style></defs><title>tw</title><path class="6d21c68d-0792-4fd6-83e6-6b8c86d6803b" d="M634.53 3382.23a8.09 8.09 0 0 0 5.84-1.67 4.06 4.06 0 0 1-3.73-2.76 3.92 3.92 0 0 0 1.78-.08 4 4 0 0 1-2.27-1.4 4 4 0 0 1-.89-2.54 3.84 3.84 0 0 0 1.78.47 4 4 0 0 1-1.64-2.41 3.93 3.93 0 0 1 .42-2.88 11.41 11.41 0 0 0 8.22 4.16c0-.16 0-.29-.06-.43a3.9 3.9 0 0 1 1-3.19 3.74 3.74 0 0 1 2.1-1.2 3.89 3.89 0 0 1 3.6 1.05.28.28 0 0 0 .3.09 8.19 8.19 0 0 0 2.27-.88 3.5 3.5 0 0 1-.65 1.23 4.11 4.11 0 0 1-1 .92l.56-.09.55-.13.55-.17.55-.21-.06.1a8 8 0 0 1-1.79 1.85.21.21 0 0 0-.1.2 10.74 10.74 0 0 1-.06 1.63 11.79 11.79 0 0 1-1.24 4.05 11.19 11.19 0 0 1-3.39 4 10.67 10.67 0 0 1-4.21 1.83 11.94 11.94 0 0 1-2.86.22 11.18 11.18 0 0 1-5.19-1.5l-.35-.21z" transform="translate(-634.53 -3368.23)"/></svg>
	</span>
	
</div>
                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Il peut aussi y avoir des moments où l'on ne voudrait jamais rollback. Stallone mentionne combien les rollbacks sont extrêmement indésirables durant les événements où <a href="https://youtu.be/7jb0FOcImdg?t=2867" rel="noopener noreferrer nofollow">la caméra change drastiquement d'angle</a>, commes les brutalities de Mortal Kombat X ou les transitions de stage d'Injustice 2. Cela signifie que ces jeux doivent empêcher de tels événements de s'exécuter tant que le joueur local n’est pas sûr qu'il se sont bien déroulés, et ne peuvent être annulés. Résoudre un tel problème demande un effort supplémentaire de débogage et de calibrage de la part des développeurs. Et donc évidemment, plus d’argent.</p><p>Enfin, il faut être pointilleux avec l'algorithme de prédiction, et copier proprement la dernière frame connue. Cela inclut des cas particuliers comme le maintien ou le relâchement de boutons sur une longue période. Si cette prédiction est ratée, cela peut donner lieu à de véritables aberrations, comme effectuer un coup qui n’a rien à voir avec sa manipulation.</p></div>
</div>                                    
<div class="magazine-container--large">
	<figure>
					<video class="magazine-container__video lazy"
				autoplay playsinline loop mute				>
				<source data-src="/media/pages/articles/le-netcode-des-jeux-de-combat/4e510ae7d7-1701364373/helplessjoyousdartfrog.mp4">
			</video>
							<figcaption class="magazine__sub-image-citation">
				<small>
					Le joueur de Cody distant fait un EX Zonk Knuckle, un coup déclenché en maintenant puis en relâchant des boutons. Ce coup est ensuite affecté par un rollback. On suppose que Street Fighter V n’a pas bien enregistré les boutons que Cody maintenait enfoncés. À l’écran le coup sort, mais en réalité il a sauté. (<a href="https://twitter.com/redneckd_crake/status/1170080873829601280" rel="noopener noreferrer nofollow">source</a>)				</small>
			</figcaption>
			</figure>
</div>                                    <div class="magazine-container">
  <div class="magazine__text">
    <h2>
      Le rollback vaut-il le coup ?    </h2>
  </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Certes, le rollback demande des moyens et de gros efforts, mais cela ne veut pas dire qu’implémenter le rollback dans un jeu est forcément difficile. La réalité est quelque part entre « copier/coller GGPO dans votre jeu en un après-midi » et « investissez tout votre argent dans les systèmes de rollback ».</p><p>La difficulté dépend en grande partie du <strong>moment où l’implémentation du rollback commence</strong>. Ajouter le rollback dans un jeu après que ses systèmes aient été développés est souvent un véritable challenge. Quand NetherRealm Studios s’y est attelé pour Mortal Kombat X, le jeu avait déjà été livré. L’implémentation a pris environ 8 années-homme réparties sur 10 mois.</p><p>Après la sortie de Rivals of Aether, le très petit studio responsable de sa création a tenté pendant des années d’y implémenter un netcode rollback. Faute de moyens, le studio a <a href="https://steamcommunity.com/games/383980/announcements/detail/2782582411957569639" rel="noopener noreferrer nofollow">finalement dû abandonner</a>.</p><p>Complètement à l'opposé, il a fallu <a href="https://youtu.be/gpXganAM_qA?t=1463" rel="noopener noreferrer nofollow">environ 2 semaines</a> à Mike Zaimont, principal développeur sur Skullgirls, pour ajouter GGPO dans son jeu. Sa décision fut prise tôt dans le projet et Mike Zaimont avait l’avantage d’avoir créé son propre moteur. En résumé, <strong>plus la décision est prise tôt, moins cela coûte cher</strong>.</p><p>Sur le long terme, ces efforts peuvent être rentabilisés. Par exemple, sauvegarder et charger des états du jeu efficacement est utile pour d’autres modes tels que l’entraînement et les replays. Implémenter le rollback une fois, c’est aussi acquérir un savoir-faire pour de prochains jeux. Après avoir durement travaillé sur Mortal Kombat X, NetherRealm fait bénéficier à ses fans d'un jeu en ligne fluide pour tous ses titres basés sur le même moteur, notamment Injustice 2 et Mortal Kombat 11.</p></div>
</div>                                    <div class="magazine-container">
    <div class="patreon-block">
    <h3>Avant de finir...</h3>
        <p>Entre sa traduction, sa correction et sa mise en page, cet article a nécessité plus de <strong>50 heures de travail</strong>. Si vous souhaitez nous aider à <em>travailler moins pour doser plus</em>, soutenez-nous financièrement via un don sur <a href="http://patreon.com/basgrospoing" rel="noopener noreferrer nofollow">Patreon</a> ! Merci !</p>        <a class="patreon-block__link" href="http://patreon.com/basgrospoing">
            <svg xmlns="http://www.w3.org/2000/svg" width="292" height="104" viewBox="0 0 292 104">
                <path fill="#000000" fill-rule="evenodd" d="M284.367244,104 L284.367244,1.42108547e-14 L291.998128,1.42108547e-14 L291.998128,104 L284.367244,104 Z M241.879569,34.6685484 L249.462761,34.6685484 L249.462761,67.6406851 L241.502892,67.6406851 L229.631221,46.443665 L229.631221,67.6406851 L222.000337,67.6406851 L222.000337,34.6685484 L229.960206,34.6685484 L241.879569,56.1472494 L241.879569,34.6685484 Z M191.902143,33.8203912 C202.828713,33.8203912 209.329565,42.1108994 209.329565,51.1546654 C209.329565,60.1983341 202.828713,68.4889396 191.902143,68.4889396 C180.925934,68.4889396 174.425082,60.1983341 174.425082,51.1546654 C174.425082,42.1108994 180.925934,33.8203912 191.902143,33.8203912 Z M201.558521,51.1546654 C201.558521,45.7379055 197.883238,40.6977258 191.902143,40.6977258 C185.872382,40.6977258 182.245765,45.7379055 182.245765,51.1546654 C182.245765,56.5714254 185.872382,61.6115077 191.902143,61.6115077 C197.883238,61.6115077 201.558521,56.5714254 201.558521,51.1546654 Z M68.6789331,41.2626448 L68.6789331,34.6685484 L91.2399738,34.6685484 L91.2399738,41.2626448 L83.7501245,41.2626448 L83.7501245,67.6406851 L76.1195321,67.6406851 L76.1195321,41.2626448 L68.6789331,41.2626448 Z M149.555601,48.2809172 L162.037548,48.2809172 L162.037548,54.2642508 L149.555601,54.2642508 L149.555601,61.516511 L162.037548,61.516511 L162.037548,67.6406851 L141.924717,67.6406851 L141.924717,34.6685484 L162.037548,34.6685484 L162.037548,40.7927225 L149.555601,40.7927225 L149.555601,48.2809172 Z M116.95985,34.6685484 C124.259803,34.6685484 128.970707,40.1803051 128.970707,46.5860627 C128.970707,51.2021638 126.520842,55.2990922 122.422162,57.2313411 L129.0184,67.6406851 L120.16307,67.6406851 L114.320187,58.5019223 L110.74029,58.5019223 L110.74029,67.6406851 L103.110379,67.6406851 L103.110379,34.6685484 L116.95985,34.6685484 Z M121.245409,46.5860627 C121.245409,43.5239757 119.172223,40.8860646 115.969003,40.8860646 L110.74029,40.8860646 L110.74029,52.2845035 L115.969003,52.2845035 C119.172223,52.2845035 121.245409,49.6481497 121.245409,46.5860627 Z M53.7468301,63.6370987 L42.0175573,63.6370987 L40.7452241,67.6406851 L32.5954591,67.6406851 L44.3722302,34.6685484 L51.3904052,34.6685484 L63.3079195,67.6406851 L55.0174113,67.6406851 L53.7468301,63.6370987 Z M47.9042396,44.088992 L43.8531549,57.6554197 L51.8603276,57.6554197 L47.9042396,44.088992 Z M13.8006102,34.6685484 C21.1021207,34.6685484 25.8131212,40.1803051 25.8131212,46.5860627 C25.8131212,52.9918203 21.1021207,58.5019223 13.8006102,58.5019223 L7.63059242,58.5019223 L7.63059242,67.6406851 L0,67.6406851 L0,34.6685484 L13.8006102,34.6685484 Z M18.1350304,46.5860627 C18.1350304,43.5239757 16.061941,40.8860646 12.8590136,40.8860646 L7.63059242,40.8860646 L7.63059242,52.2845035 L12.8590136,52.2845035 C16.061941,52.2845035 18.1350304,49.6481497 18.1350304,46.5860627 Z"/>
            </svg>
        </a>
    </div>
</div>                                    <div class="magazine-container">
	<div class="magazine__text">
       <p>Dans le jeu vidéo, ce n’est pas toujours dans les vieux pots qu’on fait les meilleures soupes. Des techniques d'animation nécessitant un investissement plus important, comme la <a href="https://en.wikipedia.org/wiki/Inversekinematics#Inversekinematicsand3D_animation" rel="noopener noreferrer nofollow">cinématique inverse</a>, sont à présent un standard dans de nombreux projets.</p><p>Ce qui fut un coût supplémentaire il y a des années est aujourd’hui un standard qualitatif qui produit de la valeur. Celle du rollback est réelle et les studios ne devraient pas craindre d'en faire une priorité. Après tout, <strong>y'a-t-il plus important</strong> pour un jeu de combat moderne que de proposer une expérience en ligne stable, qui puisse connecter les communautés du monde entier ?</p></div>
</div>                                <div class="article__footer">
  <div class="article__KO">
    <span>K</span>.<span>O</span>.
  </div>
  <div class="article__author">
        <h4>
      Infil    </h4>
      </div>

</div>

<div>
    <div class="article__credits">
    <p><small>
        <p>Infil tient à remercier <a href="https://twitter.com/Krazhier" rel="noopener noreferrer nofollow">Krazhier</a> et <a href="https://twitter.com/TheKeits" rel="noopener noreferrer nofollow">Keits</a> d'avoir pris de leur temps afin de discuter avec lui des aspects techniques du netcode, ainsi que <a href="https://twitter.com/Sajam" rel="noopener noreferrer nofollow">Sajam</a> d'avoir pris le temps de répondre à ses questions et de l'avoir soutenu tout au long du processus d'écriture. Il remercie tout particulièrement <a href="https://twitter.com/MagicMoste" rel="noopener noreferrer nofollow">MagicMoste</a> d'avoir produit toutes les merveilleuses vidéos que vous pouvez voir dans cet article. Si vous le souhaitez, voici <a href="https://www.youtube.com/watch?v=1RI5scXYhK0" rel="noopener noreferrer nofollow">une vidéo</a> qui parle des sujets traités dans cet article.</p><p>Traduit de l'anglais par Christophe Lopéré. Édition et correction par Neithan et Pr0sk.</p>    </small></p>
  </div>
  </div>
</div>

            </div>

        </article>
<footer>
    <div class="footer__background">
        <div class="footer__container">
            <div class="footer-list">
                <ul>
                    
                    <li>
                        <a href="https://basgrospoing.fr/en/articles">Articles</a>
                    </li>
                    
                    <li>
                        <a href="https://basgrospoing.fr/en/feed">
                            Website RSS</a>
                    </li>
                                        <li>
                        <a href="https://basgrospoing.fr/en/podcasts/feed">
                            Podcasts RSS</a>
                    </li>
                    
                </ul>
            </div>
            <div class="footer-list">
                <ul>
                 <li>
                        <a href="https://basgrospoing.fr/en/carte-des-assos-bagarre-francophones">
                            Trouver des joueurs
                        </a>
                    </li>
                    <li>
                        <a href="https://basgrospoing.fr/en/sponsors">
                            Sponsors
                        </a>
                    </li>
                    <li>
                        <a href="https://basgrospoing.fr/en/contact">
                            Contact
                        </a>
                    </li>
                    <li>
                        <a href="https://basgrospoing.fr/en/mentions-legales">
                            Legal mentions</a>
                    </li>

                </ul>
            </div>

            <div class="footersocial">
<ul>
    <li>
        <a href="https://facebook.com/basgrospoing/">
            <img loading="lazy"  src="/assets/images/fb.svg" alt="Facebook">
        </a>
    </li>
    <li> <a href="http://twitter.com/basgrospoing/">
            <img loading="lazy"  src="/assets/images/tw.svg" alt="Twitter">
        </a>
        </li>
    <li>
         <a href="https://www.youtube.com/user/BasGrosPoingPodcast/">
            <img loading="lazy"  src="/assets/images/yt.svg" alt="Youtube">
        </a>
    </li>
    <li>
         <a href="https://itunes.apple.com/fr/podcast/bas-gros-poing/">
            <img loading="lazy"  src="/assets/images/itunes.svg" alt="iTunes">
        </a>
    </li>
</ul>

<div class="footersocial__sponsor">

<small>Made with</small>
<a href="https://getkirby.com/">
<svg width="121" height="42" xmlns="http://www.w3.org/2000/svg"><path d="M18 0l18 10.498v21.004L18 42 0 31.502V10.498L18 0zM2 11.693v18.614l16 9.332 16-9.332V11.693L18 2.36 2 11.693z"/><path d="M26 21l-5 2.59V24h5v4H10v-4h5v-.437L10 21v-5l8 4.297L26 16"/><g><path d="M62.774 23.603l-1.97 2.162v5.255H56V11.095h4.803v8.785l1.67-2.531 4.297-6.254h5.94l-6.734 8.813L72.71 31.02h-5.693l-4.242-7.417zM78.58 31.02h-4.626V16.213h4.626V31.02zm11.796-10.633l-1.519-.11c-1.45 0-2.381.456-2.792 1.369v9.374h-4.611V16.213h4.324l.15 1.902c.776-1.45 1.857-2.176 3.244-2.176.492 0 .921.055 1.286.164l-.082 4.284zm15.41 3.352c0 2.427-.503 4.293-1.506 5.598-1.004 1.304-2.418 1.956-4.242 1.956-1.506 0-2.72-.597-3.64-1.792l-.192 1.519h-4.133V10h4.612v7.403c.857-.976 1.966-1.464 3.325-1.464 1.843 0 3.266.662 4.27 1.984 1.003 1.323 1.505 3.184 1.505 5.584v.232zm-4.626-.287c0-1.423-.19-2.438-.568-3.045-.379-.606-.96-.91-1.745-.91-1.04 0-1.76.397-2.162 1.19v5.885c.392.785 1.122 1.177 2.19 1.177 1.085 0 1.774-.529 2.066-1.587.146-.52.219-1.424.219-2.71zm12.425 1.109l2.464-8.348h4.94l-6.035 17.284-.26.63c-.858 1.915-2.372 2.873-4.543 2.873a7.201 7.201 0 0 1-1.903-.274v-3.298h.602c.648 0 1.143-.093 1.485-.28.342-.187.596-.523.76-1.006l.37-.985-5.146-14.944h4.926l2.34 8.348zM76.25 15a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"/></g></svg>
</a>
<small>and ❤</small>
</div>



</div>
            <div class="timer">
    <a class="timer__continue" href="http://patreon.com/basgrospoing"  >Continue?</a>
    <div id="timer"></div>


        <form action="https://www.paypal.com/cgi-bin/webscr" method="post" class="">

    <!-- Identify your business so that you can collect the payments. -->
    <input type="hidden" name="business"
        value="admin@basgrospoing.fr">

    <!-- Specify a Donate button. -->
    <input type="hidden" name="cmd" value="_donations">

    <!-- Specify details about the contribution -->
    <input type="hidden" name="item_name" value="Bas Gros Poing">
    <input type="hidden" name="item_number" value="Articles about fighting games">
    <input type="hidden" name="currency_code" value="USD" />

    <!-- Display the payment button. -->

    <button name="submit"  alt="Donate" style='background:transparent; border:none;'> <h4 style="display: block;
    margin: 10px;
    color: #FFF; cursor:pointer; text-decoration:underline;
     letter-spacing: -1px;">Insert coin!</h4></button>

  

    </form>
        <p>Help BGP grow!</p>
</div>        </div>
    </div>
</footer>


<div class="theme-switcher" onclick="toggleDarkLight()" title="Toggle dark/light mode">
    <span>
        <svg style="height:20px;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 89 89"><title>Fichier 1</title><g id="Calque_2" data-name="Calque 2"><g id="Calque_1-2" data-name="Calque 1"><image width="89" height="89" xlink:href="data:image/png;base64,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"/></g></g></svg>
    </span>
</div>

<script>

    document.addEventListener("DOMContentLoaded", function() {
  var lazyImages = [].slice.call(document.querySelectorAll("img.lazy"));

  if ("IntersectionObserver" in window) {
    let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          let lazyImage = entry.target;
          lazyImage.src = lazyImage.dataset.src;
          lazyImage.srcset = lazyImage.dataset.srcset;
          lazyImage.classList.remove("lazy");
          lazyImageObserver.unobserve(lazyImage);
        }
      });
    });

    lazyImages.forEach(function(lazyImage) {
      lazyImageObserver.observe(lazyImage);
    });
  } else {
    // Possibly fall back to a more compatible method here
  }
});

</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
  var lazyVideos = [].slice.call(document.querySelectorAll("video.lazy"));

  if ("IntersectionObserver" in window) {
    var lazyVideoObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(video) {
        if (video.isIntersecting) {
          for (var source in video.target.children) {
            var videoSource = video.target.children[source];
            if (typeof videoSource.tagName === "string" && videoSource.tagName === "SOURCE") {
              videoSource.src = videoSource.dataset.src;
            }
          }

          video.target.load();
          video.target.classList.remove("lazy");
          lazyVideoObserver.unobserve(video.target);
        }
      });
    });

    lazyVideos.forEach(function(lazyVideo) {
      lazyVideoObserver.observe(lazyVideo);
    });
  }
});

</script>


<script>
//Footer countdown
document.addEventListener("DOMContentLoaded", function () {
    var timeoutHandle;
    var hasStarted = false;
    function countdown(minutes) {
        var seconds = 11;

        function tick() {
            var counter = document.getElementById("timer");
            seconds--;
            counter.innerHTML =
                (seconds < 10 ? "" : "") + String(seconds);
            if (seconds > 0) {
                timeoutHandle = setTimeout(tick, 1000);
            } else {
                counter.innerHTML = "GAME OVER";
            }
        }
        tick();
    }

    var footer = document.querySelector('footer');
    var bounding = footer.getBoundingClientRect();
    if (isInViewport(footer) && hasStarted == false) {
        hasStarted = true;
        countdown(0);
    } else {
        window.addEventListener('scroll', function (event) {
            if (isInViewport(footer) && hasStarted == false) {
                hasStarted = true;

                countdown(0);
            }
        }, false);
    }

});

var isInViewport = function (elem) {
    var bounding = elem.getBoundingClientRect();
    return (
        bounding.top >= 0 &&
        bounding.left >= 0 &&
        bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
        bounding.right <= (window.innerWidth || document.documentElement.clientWidth)
    );
};

</script>

<script>
  var lastScrollTop = 0;
  var mag;
  if (document.querySelector("#magazine")) {
    window.addEventListener("scroll", function () {
      var st = window.pageYOffset || document.documentElement.scrollTop;
      if (st > lastScrollTop) {
        var header = document.getElementsByTagName("header")[0];
        header.classList.add("header-mag");
      } else {
        var header = document.getElementsByTagName("header")[0];
        header.classList.remove("header-mag");
      }
      lastScrollTop = st;
    }, false);
  }

  window.addEventListener('scroll', function (e) {
    var s = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode ||
      document.body).scrollTop;
    var body = document.body;
    var html = document.documentElement;
    var d = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);
    var c = window.innerHeight;
    var position = (s / (d - c)) * 100;
    document.getElementById('Progress-bar').setAttribute('style', 'width: ' + position + '%');
  });
</script>

</body>
</html>